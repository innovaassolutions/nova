(()=>{var a={};a.id=94,a.ids=[94],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15701:(a,b,c)=>{Promise.resolve().then(c.bind(c,68969))},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25429:(a,b,c)=>{Promise.resolve().then(c.bind(c,92064))},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:a=>{"use strict";a.exports=require("path")},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},54775:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H={children:["",{children:["(dashboard)",{children:["contacts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,92064)),"/Users/toddabraham/Documents/Coding/Projects/NovaCRM/novacrm/app/(dashboard)/contacts/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,86457)),"/Users/toddabraham/Documents/Coding/Projects/NovaCRM/novacrm/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,16953)),"/Users/toddabraham/Documents/Coding/Projects/NovaCRM/novacrm/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,I=["/Users/toddabraham/Documents/Coding/Projects/NovaCRM/novacrm/app/(dashboard)/contacts/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/(dashboard)/contacts/page",pathname:"/contacts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/(dashboard)/contacts/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68969:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>J});var d=c(21124),e=c(38301);let f=e.forwardRef(function({title:a,titleId:b,...c},d){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?e.createElement("title",{id:b},a):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))});var g=c(17080),h=c(95627),i=c.n(h),j=c(16817),k=c(36236),l=c(92073),m=c(7536),n=c(7425),o=c(41118);let p=e.forwardRef(function({title:a,titleId:b,...c},d){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?e.createElement("title",{id:b},a):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});function q({firstName:a,lastName:b,size:c="md"}){let e=`${a.charAt(0)}${b.charAt(0)}`.toUpperCase(),f=["#89b4fa","#74c7ec","#94e2d5","#b4befe","#f5c2e7","#f38ba8","#fab387","#f9e2af","#a6e3a1"],g=(a.charCodeAt(0)+b.charCodeAt(0))%f.length,h=f[g];return(0,d.jsx)("div",{className:`${{sm:"h-8 w-8 text-xs",md:"h-10 w-10 text-sm",lg:"h-12 w-12 text-base"}[c]} flex items-center justify-center rounded-md font-bold text-[#1e1e2e]`,style:{backgroundColor:h},children:e})}function r({campaigns:a}){let b=["#89b4fa","#74c7ec","#94e2d5","#b4befe"];return a&&0!==a.length?(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:a.map((a,c)=>{let e=b[c%b.length];return(0,d.jsx)("span",{className:"rounded-md px-2 py-1 text-xs font-semibold text-[#1e1e2e]",style:{backgroundColor:e},children:a.campaign.name},a.campaign.id)})}):(0,d.jsx)("span",{className:"text-sm text-[#6c7086]",children:"—"})}var s=c(22498);function t({contactId:a,contactName:b,contactCompany:c,isOpen:f,onClose:h,onDealCreated:i}){let{showToast:k}=(0,s.d)(),[l,m]=(0,e.useState)(!1),[n,o]=(0,e.useState)([]),[p,q]=(0,e.useState)(!0),[r,t]=(0,e.useState)(""),[u,v]=(0,e.useState)(""),[w,x]=(0,e.useState)(50),[y,z]=(0,e.useState)(""),[A,B]=(0,e.useState)(""),[C,D]=(0,e.useState)(""),[E,F]=(0,e.useState)({}),G=async()=>{if((()=>{let a={};if(r.trim()?r.length>200&&(a.title="Deal title must be 200 characters or less"):a.title="Deal title is required",u){let b=parseFloat(u);isNaN(b)||b<0?a.value="Value must be a positive number":b>99999999.99&&(a.value="Value must be less than $99,999,999.99")}if((w<0||w>100)&&(a.probability="Probability must be between 0 and 100"),y||(a.stageId="Please select a pipeline stage"),A){let b=new Date(A),c=new Date;c.setHours(0,0,0,0),b<c&&(a.expectedCloseDate="Close date cannot be in the past")}return C&&C.length>2e3&&(a.notes="Notes must be 2000 characters or less"),F(a),0===Object.keys(a).length})())try{m(!0);let b={contact_id:a,title:r.trim(),value:u?parseFloat(u):null,probability:w||null,stage_id:y,expected_close_date:A||null,notes:C.trim()||null},c=await fetch("/api/deals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok){let a=await c.json();throw Error(a.error||"Failed to create deal")}k("Deal created successfully","success"),H(),i()}catch(a){console.error("Error creating deal:",a),k(a.message||"Failed to create deal. Please try again.","error")}finally{m(!1)}},H=()=>{t(""),v(""),x(50),z(n[0]?.id||""),B(""),D(""),F({}),h()};return f?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 z-40 bg-black/70",onClick:a=>{a.target===a.currentTarget&&(r||u||C?confirm("You have unsaved changes. Are you sure you want to close?")&&H():H())}}),(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,d.jsxs)("div",{className:"relative w-full max-w-2xl max-h-[90vh] overflow-hidden rounded-2xl border border-[#313244] bg-[#1e1e2e] shadow-2xl",onClick:a=>a.stopPropagation(),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between border-b border-[#313244] px-6 py-4",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-[#cdd6f4]",children:"Create New Deal"}),(0,d.jsx)("button",{onClick:H,className:"rounded-lg p-1 text-[#a6adc8] transition-colors hover:bg-[#313244] hover:text-[#cdd6f4]",children:(0,d.jsx)(j.A,{className:"h-6 w-6"})})]}),(0,d.jsx)("div",{className:"overflow-y-auto p-6",style:{maxHeight:"calc(90vh - 140px)"},children:p?(0,d.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,d.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-[#313244] border-t-[#F25C05]"})}):(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-medium text-[#a6adc8]",children:"For:"}),(0,d.jsxs)("p",{className:"text-base text-[#cdd6f4]",children:[b,c&&(0,d.jsxs)("span",{className:"text-[#a6adc8]",children:[" (",c,")"]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block mb-2 text-sm font-medium text-[#cdd6f4]",children:["Deal Title ",(0,d.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,d.jsx)("input",{type:"text",value:r,onChange:a=>t(a.target.value),placeholder:"e.g., Q1 Enterprise License",maxLength:200,className:"w-full rounded-lg border border-[#313244] bg-[#181825] px-4 py-2 text-[#cdd6f4] placeholder-[#6c7086] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]"}),(0,d.jsxs)("div",{className:"mt-1 flex justify-between",children:[E.title&&(0,d.jsx)("p",{className:"text-xs text-red-400",children:E.title}),(0,d.jsxs)("span",{className:"ml-auto text-xs text-[#6c7086]",children:[r.length,"/200"]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-medium text-[#cdd6f4]",children:"Deal Value ($)"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#a6adc8]",children:"$"}),(0,d.jsx)("input",{type:"text",value:u,onChange:a=>v(a.target.value.replace(/[^0-9.]/g,"")),placeholder:"0.00",className:"w-full rounded-lg border border-[#313244] bg-[#181825] pl-8 pr-4 py-2 text-[#cdd6f4] placeholder-[#6c7086] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]"})]}),E.value&&(0,d.jsx)("p",{className:"mt-1 text-xs text-red-400",children:E.value})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-medium text-[#cdd6f4]",children:"Win Probability (%)"}),(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("input",{type:"range",min:"0",max:"100",step:"5",value:w,onChange:a=>x(parseInt(a.target.value)),className:"flex-1"}),(0,d.jsx)("input",{type:"number",min:"0",max:"100",value:w,onChange:a=>x(Math.min(100,Math.max(0,parseInt(a.target.value)||0))),className:"w-20 rounded-lg border border-[#313244] bg-[#181825] px-3 py-2 text-center text-[#cdd6f4] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]"}),(0,d.jsx)("span",{className:"text-[#a6adc8]",children:"%"})]}),E.probability&&(0,d.jsx)("p",{className:"mt-1 text-xs text-red-400",children:E.probability})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block mb-2 text-sm font-medium text-[#cdd6f4]",children:["Pipeline Stage ",(0,d.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,d.jsx)("select",{value:y,onChange:a=>z(a.target.value),className:"w-full rounded-lg border border-[#313244] bg-[#181825] px-4 py-2 text-[#cdd6f4] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]",children:n.map(a=>(0,d.jsxs)("option",{value:a.id,children:[a.order_num,". ",a.name]},a.id))}),E.stageId&&(0,d.jsx)("p",{className:"mt-1 text-xs text-red-400",children:E.stageId})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-medium text-[#cdd6f4]",children:"Expected Close Date"}),(0,d.jsx)("input",{type:"date",value:A,onChange:a=>B(a.target.value),min:new Date().toISOString().split("T")[0],className:"w-full rounded-lg border border-[#313244] bg-[#181825] px-4 py-2 text-[#cdd6f4] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]"}),E.expectedCloseDate&&(0,d.jsx)("p",{className:"mt-1 text-xs text-red-400",children:E.expectedCloseDate})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block mb-2 text-sm font-medium text-[#cdd6f4]",children:"Notes"}),(0,d.jsx)("textarea",{value:C,onChange:a=>D(a.target.value),placeholder:"Add context, next steps, or important details...",rows:4,maxLength:2e3,className:"w-full rounded-lg border border-[#313244] bg-[#181825] px-4 py-2 text-[#cdd6f4] placeholder-[#6c7086] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05] resize-none"}),(0,d.jsx)("div",{className:"mt-1 flex justify-end",children:(0,d.jsxs)("span",{className:"text-xs text-[#6c7086]",children:[C.length,"/2000"]})}),E.notes&&(0,d.jsx)("p",{className:"mt-1 text-xs text-red-400",children:E.notes})]})]})}),(0,d.jsxs)("div",{className:"flex items-center justify-end gap-3 border-t border-[#313244] px-6 py-4",children:[(0,d.jsx)("button",{onClick:H,disabled:l,className:"rounded-lg border border-[#313244] bg-transparent px-4 py-2 text-sm font-medium text-[#cdd6f4] transition-colors hover:bg-[#313244] disabled:opacity-50",children:"Cancel"}),(0,d.jsx)("button",{onClick:G,disabled:l||p,className:"flex items-center gap-2 rounded-lg bg-[#F25C05] px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-[#ff6b1a] disabled:opacity-50",children:l?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Creating..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.A,{className:"h-4 w-4"}),"Create Deal"]})})]})]})})]}):null}var u=c(78088);function v({contactId:a,isOpen:b,onClose:c,onContactUpdated:f,onContactDeleted:h}){let[i,j]=(0,e.useState)(null),[k,l]=(0,e.useState)([]),[v,y]=(0,e.useState)([]),[z,A]=(0,e.useState)(!0),[B,C]=(0,e.useState)(!1),[D,E]=(0,e.useState)(!1),[F,G]=(0,e.useState)(!1),[H,I]=(0,e.useState)(!1),[J,K]=(0,e.useState)(!1),[L,M]=(0,e.useState)(null),{showToast:N}=(0,s.d)(),[O,P]=(0,e.useState)({}),Q=async()=>{try{A(!0);let b=await fetch(`/api/contacts/${a}`);if(!b.ok)throw Error("Failed to fetch contact");let c=await b.json();j(c.contact),P(c.contact),await R()}catch(a){console.error("Error fetching contact:",a),N("Failed to load contact details","error"),c()}finally{A(!1)}},R=async()=>{try{let b=await fetch(`/api/deals?contact_id=${a}`);if(b.ok){let a=await b.json();l(a.deals||[])}}catch(a){console.error("Error fetching deals:",a)}},S=a=>{M(a),K(!0)},T=async()=>{if(i)try{if(E(!0),!(await fetch(`/api/contacts/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)})).ok)throw Error("Failed to update contact");N("Contact updated successfully!","success"),C(!1),await Q(),f()}catch(a){console.error("Error updating contact:",a),N("Failed to update contact","error")}finally{E(!1)}},U=async()=>{if(i)try{if(!(await fetch(`/api/contacts/${i.id}`,{method:"DELETE"})).ok)throw Error("Failed to delete contact");N("Contact deleted successfully","success"),h(),c()}catch(a){console.error("Error deleting contact:",a),N("Failed to delete contact","error")}},V=a=>a?new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"—";return b?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",onClick:c}),(0,d.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,d.jsx)("div",{className:"relative w-full max-w-4xl max-h-[90vh] overflow-hidden rounded-2xl border border-[#313244] bg-[#1e1e2e] shadow-2xl",onClick:a=>a.stopPropagation(),children:z?(0,d.jsx)("div",{className:"flex h-96 items-center justify-center",children:(0,d.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-[#313244] border-t-[#F25C05]"})}):i?(0,d.jsxs)("div",{className:"flex h-full max-h-[90vh] flex-col",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between border-b border-[#313244] px-6 py-4",children:[(0,d.jsxs)("button",{onClick:c,className:"flex items-center gap-2 text-sm text-[#a6adc8] transition-colors hover:text-[#cdd6f4]",children:[(0,d.jsx)(m.A,{className:"h-5 w-5"}),"Back"]}),(0,d.jsx)("div",{className:"flex gap-2",children:B?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:()=>{C(!1),P(i||{})},disabled:D,className:"rounded-lg border border-[#313244] bg-transparent px-4 py-2 text-sm font-medium text-[#cdd6f4] transition-colors hover:bg-[#313244] disabled:opacity-50",children:"Cancel"}),(0,d.jsx)("button",{onClick:T,disabled:D,className:"rounded-lg bg-[#F25C05] px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-[#ff6b1a] disabled:opacity-50",children:D?"Saving...":"Save Changes"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("button",{onClick:()=>I(!0),className:"flex items-center gap-2 rounded-lg bg-[#F25C05] px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-[#ff6b1a]",children:[(0,d.jsx)(g.A,{className:"h-4 w-4"}),"New Deal"]}),(0,d.jsxs)("button",{onClick:()=>{C(!0),P(i||{})},className:"flex items-center gap-2 rounded-lg border border-[#313244] bg-transparent px-4 py-2 text-sm font-medium text-[#cdd6f4] transition-colors hover:bg-[#313244]",children:[(0,d.jsx)(n.A,{className:"h-4 w-4"}),"Edit"]}),(0,d.jsxs)("button",{onClick:()=>G(!0),className:"flex items-center gap-2 rounded-lg border border-red-500/20 bg-transparent px-4 py-2 text-sm font-medium text-red-400 transition-colors hover:bg-red-500/10",children:[(0,d.jsx)(o.A,{className:"h-4 w-4"}),"Delete"]})]})})]}),(0,d.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,d.jsxs)("div",{className:"mb-6 flex items-start gap-4",children:[(0,d.jsx)(q,{firstName:i.first_name,lastName:i.last_name,size:"lg"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("h2",{className:"text-2xl font-bold text-[#cdd6f4]",children:[i.first_name," ",i.last_name]}),i.position&&i.company&&(0,d.jsxs)("p",{className:"mt-1 text-base text-[#a6adc8]",children:[i.position," at ",i.company]}),i.email&&(0,d.jsx)("a",{href:`mailto:${i.email}`,className:"mt-2 inline-block text-sm text-[#89b4fa] transition-colors hover:text-[#F25C05]",children:i.email})]})]}),(0,d.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,d.jsxs)("div",{className:"space-y-4 rounded-xl border border-[#313244] bg-[#181825] p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-[#cdd6f4]",children:"Contact Information"}),B?(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)(x,{label:"Company",value:O.company||"",onChange:a=>P({...O,company:a.target.value})}),(0,d.jsx)(x,{label:"Position",value:O.position||"",onChange:a=>P({...O,position:a.target.value})}),(0,d.jsx)(x,{label:"Email",type:"email",value:O.email||"",onChange:a=>P({...O,email:a.target.value})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-[#a6adc8]",children:"Assign to"}),(0,d.jsxs)("select",{value:O.owner_id||"",onChange:a=>P({...O,owner_id:a.target.value||null}),className:"mt-1 w-full rounded-lg border border-[#313244] bg-[#1e1e2e] px-3 py-2 text-sm text-[#cdd6f4] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]",children:[(0,d.jsx)("option",{value:"",children:"Unassigned"}),v.map(a=>(0,d.jsxs)("option",{value:a.id,children:[a.name," (",a.role,")"]},a.id))]})]})]}):(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)(w,{label:"LinkedIn",value:(0,d.jsx)("a",{href:i.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"text-[#89b4fa] transition-colors hover:text-[#F25C05]",children:"View Profile →"})}),(0,d.jsx)(w,{label:"Company",value:i.company||"—"}),(0,d.jsx)(w,{label:"Position",value:i.position||"—"}),(0,d.jsx)(w,{label:"Connected On",value:i.connected_on?V(i.connected_on):"—"}),(0,d.jsx)(w,{label:"Source",value:i.source}),(0,d.jsx)(w,{label:"Owner",value:i.owner_id?v.find(a=>a.id===i.owner_id)?.name||"Assigned":"Unassigned"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"mb-2 text-sm font-semibold text-[#a6adc8]",children:"Campaigns"}),(0,d.jsx)(r,{campaigns:i.campaigns})]})]}),(0,d.jsxs)("div",{className:"border-t border-[#313244] pt-3 text-xs text-[#6c7086]",children:[(0,d.jsxs)("p",{children:["Created: ",V(i.created_at)]}),(0,d.jsxs)("p",{children:["Updated: ",V(i.updated_at)]})]})]}),(0,d.jsxs)("div",{className:"space-y-4 rounded-xl border border-[#313244] bg-[#181825] p-6",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-[#cdd6f4]",children:"Notes"}),B?(0,d.jsxs)("div",{children:[(0,d.jsx)("textarea",{value:O.notes||"",onChange:a=>P({...O,notes:a.target.value}),placeholder:"Add notes here... Markdown supported!",className:"min-h-[300px] w-full rounded-lg border border-[#313244] bg-[#1e1e2e] p-3 text-sm text-[#cdd6f4] placeholder-[#6c7086] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]"}),(0,d.jsx)("p",{className:"mt-2 text-xs text-[#6c7086]",children:"Tip: Use Markdown for formatting (e.g., **bold**, *italic*, - bullets)"})]}):(0,d.jsx)("div",{className:"prose prose-invert max-w-none",children:i.notes?(0,d.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-[#cdd6f4]",children:i.notes}):(0,d.jsx)("p",{className:"text-sm text-[#6c7086]",children:"No notes yet. Click Edit to add notes."})})]})]}),(0,d.jsxs)("div",{className:"mt-6 space-y-4 rounded-xl border border-[#313244] bg-[#181825] p-6",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("h3",{className:"text-lg font-semibold text-[#cdd6f4]",children:["Deals (",k.length,")"]})}),0===k.length?(0,d.jsx)("p",{className:"text-sm text-[#6c7086]",children:'No deals yet. Click "New Deal" to create one.'}):(0,d.jsx)("div",{className:"space-y-3",children:k.map(a=>{var b;return(0,d.jsxs)("div",{onClick:()=>S(a.id),className:"flex items-center justify-between rounded-lg border border-[#313244] bg-[#1e1e2e] p-4 transition-all hover:border-[#F25C05] hover:shadow-lg cursor-pointer",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("h4",{className:"text-base font-semibold text-[#cdd6f4]",children:a.title}),(0,d.jsx)("span",{className:`inline-block rounded-md border px-2 py-0.5 text-xs font-semibold ${"Open"===a.status?"bg-green-500/20 text-green-400 border-green-500/50":"Won"===a.status?"bg-blue-500/20 text-blue-400 border-blue-500/50":"bg-red-500/20 text-red-400 border-red-500/50"}`,children:a.status})]}),(0,d.jsxs)("div",{className:"mt-1 flex items-center gap-4 text-sm text-[#a6adc8]",children:[(0,d.jsx)("span",{children:null===(b=a.value)?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(b)}),(0,d.jsx)("span",{children:"•"}),(0,d.jsxs)("span",{children:[a.probability||0,"% probability"]}),(0,d.jsx)("span",{children:"•"}),(0,d.jsx)("span",{children:a.stage.name})]})]}),(0,d.jsx)("button",{onClick:b=>{b.stopPropagation(),S(a.id)},className:"rounded-lg border border-[#313244] bg-transparent p-2 text-[#a6adc8] transition-colors hover:bg-[#313244] hover:text-[#cdd6f4]",children:(0,d.jsx)(p,{className:"h-5 w-5"})})]},a.id)})})]})]})]}):null})}),F&&i&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 z-[60] bg-black/80 backdrop-blur-sm",onClick:()=>G(!1)}),(0,d.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:(0,d.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-red-500/20 bg-[#1e1e2e] p-6 shadow-2xl",onClick:a=>a.stopPropagation(),children:[(0,d.jsx)("h3",{className:"text-xl font-bold text-[#cdd6f4]",children:"Delete Contact?"}),(0,d.jsxs)("p",{className:"mt-3 text-sm text-[#a6adc8]",children:["This will permanently delete ",(0,d.jsxs)("span",{className:"font-semibold text-[#cdd6f4]",children:[i.first_name," ",i.last_name]}),". This action cannot be undone."]}),(0,d.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,d.jsx)("button",{onClick:()=>G(!1),className:"rounded-lg border border-[#313244] bg-transparent px-4 py-2 text-sm font-medium text-[#cdd6f4] transition-colors hover:bg-[#313244]",children:"Cancel"}),(0,d.jsx)("button",{onClick:U,className:"rounded-lg bg-red-500 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-red-600",children:"Delete Contact"})]})]})})]}),i&&(0,d.jsx)(t,{contactId:i.id,contactName:`${i.first_name} ${i.last_name}`,contactCompany:i.company,isOpen:H,onClose:()=>I(!1),onDealCreated:Q}),L&&(0,d.jsx)(u.A,{dealId:L,isOpen:J,onClose:()=>{K(!1),M(null)},onDealUpdated:R,onDealDeleted:R})]}):null}function w({label:a,value:b}){return(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-[#a6adc8]",children:a}),(0,d.jsx)("p",{className:"mt-1 text-sm text-[#cdd6f4]",children:b})]})}function x({label:a,value:b,onChange:c,type:e="text"}){return(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-semibold text-[#a6adc8]",children:a}),(0,d.jsx)("input",{type:e,value:b,onChange:c,className:"mt-1 w-full rounded-lg border border-[#313244] bg-[#1e1e2e] px-3 py-2 text-sm text-[#cdd6f4] placeholder-[#6c7086] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]"})]})}function y({isOpen:a,onClose:b,onSuccess:c}){let f=(0,e.useRef)(null),[g,h]=(0,e.useState)(!1),[m,n]=(0,e.useState)([]),[o,p]=(0,e.useState)(!1),[q,r]=(0,e.useState)(!1),[s,t]=(0,e.useState)(!1),[u,w]=(0,e.useState)([]),[x,y]=(0,e.useState)(!1),[z,A]=(0,e.useState)(null),B=new Date().toISOString().split("T")[0],[C,D]=(0,e.useState)({first_name:"",last_name:"",linkedin_url:"",email:"",company:"",position:"",connected_on:B,source:"LinkedIn",campaign_ids:[]}),[E,F]=(0,e.useState)({}),G=a=>/^https:\/\/www\.linkedin\.com\/in\/[a-zA-Z0-9_-]+\/?$/.test(a),H=a=>!a||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),I=async()=>{if(C.linkedin_url||C.first_name&&C.last_name){y(!0);try{let a=new URLSearchParams;C.linkedin_url&&a.append("linkedin_url",C.linkedin_url),C.first_name&&C.last_name&&(a.append("first_name",C.first_name),a.append("last_name",C.last_name));let b=await fetch(`/api/contacts/check-duplicate?${a}`);if(b.ok){let a=await b.json();t(a.isDuplicate),w(a.matches||[])}}catch(a){console.error("Error checking for duplicates:",a)}finally{y(!1)}}},J=async()=>{if(C.linkedin_url){let a=G(C.linkedin_url);r(a),a?(F(a=>{let b={...a};return delete b.linkedin_url,b}),await I()):(F(a=>({...a,linkedin_url:"Must be a valid LinkedIn profile URL (e.g., https://www.linkedin.com/in/username)"})),t(!1),w([]))}},K=(a,b)=>{D(c=>({...c,[a]:b})),E[a]&&F(b=>{let c={...b};return delete c[a],c}),"linkedin_url"===a&&(r(!1),t(!1),w([]))},L=async a=>{if(a.preventDefault(),(()=>{let a={};return C.first_name.trim()||(a.first_name="First name is required"),C.last_name.trim()||(a.last_name="Last name is required"),C.linkedin_url.trim()?G(C.linkedin_url)||(a.linkedin_url="Must be a valid LinkedIn profile URL"):a.linkedin_url="LinkedIn URL is required",C.email&&!H(C.email)&&(a.email="Please enter a valid email address"),0===C.campaign_ids.length&&(a.campaign_ids="Please select at least one campaign"),F(a),0===Object.keys(a).length})()){h(!0);try{let a=await fetch("/api/contacts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}),b=await a.json();a.ok?(D({first_name:"",last_name:"",linkedin_url:"",email:"",company:"",position:"",connected_on:B,source:"LinkedIn",campaign_ids:[]}),r(!1),F({}),c()):b.error?.includes("duplicate")||b.error?.includes("already exists")?F(a=>({...a,linkedin_url:"A contact with this LinkedIn URL already exists"})):F(a=>({...a,linkedin_url:b.error||"Failed to create contact"}))}catch(a){console.error("Submit error:",a),F(a=>({...a,linkedin_url:"An unexpected error occurred. Please try again."}))}finally{h(!1)}}};return a?(0,d.jsxs)("div",{onClick:a=>{a.target===a.currentTarget&&b()},className:"jsx-2c8bf314faae8ebd fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:[(0,d.jsxs)("div",{ref:f,style:{animation:"slideUp 0.3s ease"},className:"jsx-2c8bf314faae8ebd relative w-full max-w-[600px] animate-slideUp rounded-lg bg-[#181825] shadow-xl",children:[(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd flex items-center justify-between border-b border-[#313244] px-6 py-4",children:[(0,d.jsx)("h2",{className:"jsx-2c8bf314faae8ebd text-xl font-semibold text-[#cdd6f4]",children:"New Contact"}),(0,d.jsx)("button",{onClick:b,className:"jsx-2c8bf314faae8ebd rounded-lg p-1 text-[#a6adc8] transition-colors hover:bg-[#313244] hover:text-[#cdd6f4]",children:(0,d.jsx)(j.A,{className:"h-5 w-5"})})]}),(0,d.jsxs)("form",{onSubmit:L,className:"jsx-2c8bf314faae8ebd max-h-[calc(100vh-200px)] overflow-y-auto px-6 py-4",children:[(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd space-y-4",children:[(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd",children:[(0,d.jsxs)("label",{htmlFor:"first_name",className:"jsx-2c8bf314faae8ebd mb-1 block text-sm font-medium text-[#cdd6f4]",children:["First Name ",(0,d.jsx)("span",{className:"jsx-2c8bf314faae8ebd text-red-400",children:"*"})]}),(0,d.jsx)("input",{type:"text",id:"first_name",value:C.first_name,onChange:a=>K("first_name",a.target.value),placeholder:"John",className:`jsx-2c8bf314faae8ebd w-full rounded-lg border ${E.first_name?"border-red-400":"border-[#313244]"} bg-[#1e1e2e] px-3 py-2 text-[#cdd6f4] placeholder-[#6c7086] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]`}),E.first_name&&(0,d.jsx)("p",{className:"jsx-2c8bf314faae8ebd mt-1 text-sm text-red-400",children:E.first_name})]}),(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd",children:[(0,d.jsxs)("label",{htmlFor:"last_name",className:"jsx-2c8bf314faae8ebd mb-1 block text-sm font-medium text-[#cdd6f4]",children:["Last Name ",(0,d.jsx)("span",{className:"jsx-2c8bf314faae8ebd text-red-400",children:"*"})]}),(0,d.jsx)("input",{type:"text",id:"last_name",value:C.last_name,onChange:a=>K("last_name",a.target.value),placeholder:"Doe",className:`jsx-2c8bf314faae8ebd w-full rounded-lg border ${E.last_name?"border-red-400":"border-[#313244]"} bg-[#1e1e2e] px-3 py-2 text-[#cdd6f4] placeholder-[#6c7086] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]`}),E.last_name&&(0,d.jsx)("p",{className:"jsx-2c8bf314faae8ebd mt-1 text-sm text-red-400",children:E.last_name})]}),(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd",children:[(0,d.jsxs)("label",{htmlFor:"linkedin_url",className:"jsx-2c8bf314faae8ebd mb-1 block text-sm font-medium text-[#cdd6f4]",children:["LinkedIn URL ",(0,d.jsx)("span",{className:"jsx-2c8bf314faae8ebd text-red-400",children:"*"})]}),(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd relative",children:[(0,d.jsx)("input",{type:"url",id:"linkedin_url",value:C.linkedin_url,onChange:a=>K("linkedin_url",a.target.value),onBlur:J,placeholder:"https://www.linkedin.com/in/username",className:`jsx-2c8bf314faae8ebd w-full rounded-lg border ${E.linkedin_url?"border-red-400":q?"border-green-500":"border-[#313244]"} bg-[#1e1e2e] px-3 py-2 pr-10 text-[#cdd6f4] placeholder-[#6c7086] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]`}),q&&(0,d.jsx)(k.A,{className:"absolute right-3 top-2.5 h-5 w-5 text-green-500"})]}),E.linkedin_url&&(0,d.jsx)("p",{className:"jsx-2c8bf314faae8ebd mt-1 text-sm text-red-400",children:E.linkedin_url}),!E.linkedin_url&&!q&&!s&&(0,d.jsx)("p",{className:"jsx-2c8bf314faae8ebd mt-1 text-xs text-[#6c7086]",children:"Format: https://www.linkedin.com/in/username"}),x&&(0,d.jsx)("p",{className:"jsx-2c8bf314faae8ebd mt-1 text-xs text-[#a6adc8]",children:"Checking for duplicates..."}),!E.linkedin_url&&s&&u.length>0&&(0,d.jsx)("div",{className:"jsx-2c8bf314faae8ebd mt-2 rounded-lg border-l-4 border-[#f9e2af] bg-[#f9e2af]/10 p-3",children:(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd flex items-start gap-2",children:[(0,d.jsx)(l.A,{className:"h-5 w-5 flex-shrink-0 text-[#f9e2af]"}),(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd flex-1",children:[(0,d.jsx)("p",{className:"jsx-2c8bf314faae8ebd text-sm font-medium text-[#f9e2af]",children:"This contact may already exist"}),u.map(a=>(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd mt-1 text-sm text-[#cdd6f4]",children:[(0,d.jsxs)("span",{className:"jsx-2c8bf314faae8ebd font-semibold",children:[a.first_name," ",a.last_name]}),a.company&&(0,d.jsxs)("span",{className:"jsx-2c8bf314faae8ebd",children:[" at ",a.company]})," • ",(0,d.jsx)("button",{type:"button",onClick:()=>A(a.id),className:"jsx-2c8bf314faae8ebd text-[#89b4fa] hover:text-[#F25C05] hover:underline",children:"View Contact"})]},a.id))]})]})})]}),(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd",children:[(0,d.jsx)("label",{htmlFor:"email",className:"jsx-2c8bf314faae8ebd mb-1 block text-sm font-medium text-[#cdd6f4]",children:"Email"}),(0,d.jsx)("input",{type:"email",id:"email",value:C.email,onChange:a=>K("email",a.target.value),onBlur:()=>{C.email&&!H(C.email)?F(a=>({...a,email:"Please enter a valid email address"})):F(a=>{let b={...a};return delete b.email,b})},placeholder:"john.doe@example.com",className:`jsx-2c8bf314faae8ebd w-full rounded-lg border ${E.email?"border-red-400":"border-[#313244]"} bg-[#1e1e2e] px-3 py-2 text-[#cdd6f4] placeholder-[#6c7086] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]`}),E.email&&(0,d.jsx)("p",{className:"jsx-2c8bf314faae8ebd mt-1 text-sm text-red-400",children:E.email})]}),(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd",children:[(0,d.jsx)("label",{htmlFor:"company",className:"jsx-2c8bf314faae8ebd mb-1 block text-sm font-medium text-[#cdd6f4]",children:"Company"}),(0,d.jsx)("input",{type:"text",id:"company",value:C.company,onChange:a=>K("company",a.target.value),placeholder:"Acme Corp",className:"jsx-2c8bf314faae8ebd w-full rounded-lg border border-[#313244] bg-[#1e1e2e] px-3 py-2 text-[#cdd6f4] placeholder-[#6c7086] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]"})]}),(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd",children:[(0,d.jsx)("label",{htmlFor:"position",className:"jsx-2c8bf314faae8ebd mb-1 block text-sm font-medium text-[#cdd6f4]",children:"Position"}),(0,d.jsx)("input",{type:"text",id:"position",value:C.position,onChange:a=>K("position",a.target.value),placeholder:"Senior Developer",className:"jsx-2c8bf314faae8ebd w-full rounded-lg border border-[#313244] bg-[#1e1e2e] px-3 py-2 text-[#cdd6f4] placeholder-[#6c7086] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]"})]}),(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd",children:[(0,d.jsx)("label",{htmlFor:"connected_on",className:"jsx-2c8bf314faae8ebd mb-1 block text-sm font-medium text-[#cdd6f4]",children:"Connected On"}),(0,d.jsx)("input",{type:"date",id:"connected_on",value:C.connected_on,onChange:a=>K("connected_on",a.target.value),max:B,className:"jsx-2c8bf314faae8ebd w-full rounded-lg border border-[#313244] bg-[#1e1e2e] px-3 py-2 text-[#cdd6f4] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]"})]}),(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd",children:[(0,d.jsx)("label",{htmlFor:"source",className:"jsx-2c8bf314faae8ebd mb-1 block text-sm font-medium text-[#cdd6f4]",children:"Lead Source"}),(0,d.jsxs)("select",{id:"source",value:C.source,onChange:a=>K("source",a.target.value),className:"jsx-2c8bf314faae8ebd w-full rounded-lg border border-[#313244] bg-[#1e1e2e] px-3 py-2 text-[#cdd6f4] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]",children:[(0,d.jsx)("option",{value:"LinkedIn",className:"jsx-2c8bf314faae8ebd",children:"LinkedIn"}),(0,d.jsx)("option",{value:"Referral",className:"jsx-2c8bf314faae8ebd",children:"Referral"}),(0,d.jsx)("option",{value:"Website",className:"jsx-2c8bf314faae8ebd",children:"Website"}),(0,d.jsx)("option",{value:"Event",className:"jsx-2c8bf314faae8ebd",children:"Event"}),(0,d.jsx)("option",{value:"Other",className:"jsx-2c8bf314faae8ebd",children:"Other"})]})]}),(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd",children:[(0,d.jsxs)("label",{className:"jsx-2c8bf314faae8ebd mb-1 block text-sm font-medium text-[#cdd6f4]",children:["Campaigns ",(0,d.jsx)("span",{className:"jsx-2c8bf314faae8ebd text-red-400",children:"*"})]}),o?(0,d.jsx)("div",{className:"jsx-2c8bf314faae8ebd rounded-lg border border-[#313244] bg-[#1e1e2e] px-3 py-2 text-[#6c7086]",children:"Loading campaigns..."}):0===m.length?(0,d.jsx)("div",{className:"jsx-2c8bf314faae8ebd rounded-lg border border-[#313244] bg-[#1e1e2e] px-3 py-2 text-[#6c7086]",children:"No campaigns available"}):(0,d.jsxs)("div",{className:`jsx-2c8bf314faae8ebd rounded-lg border ${E.campaign_ids?"border-red-400":"border-[#313244]"} bg-[#1e1e2e] p-3`,children:[(0,d.jsx)("div",{className:"jsx-2c8bf314faae8ebd max-h-[150px] space-y-2 overflow-y-auto",children:m.map(a=>(0,d.jsxs)("label",{className:"jsx-2c8bf314faae8ebd flex cursor-pointer items-center space-x-2 rounded px-2 py-1 hover:bg-[#313244]",children:[(0,d.jsx)("input",{type:"checkbox",checked:C.campaign_ids.includes(a.id),onChange:()=>{var b;return b=a.id,void(D(a=>{let c=a.campaign_ids.includes(b);return{...a,campaign_ids:c?a.campaign_ids.filter(a=>a!==b):[...a.campaign_ids,b]}}),E.campaign_ids&&F(a=>{let b={...a};return delete b.campaign_ids,b}))},className:"jsx-2c8bf314faae8ebd h-4 w-4 rounded border-[#6c7086] bg-[#1e1e2e] text-[#F25C05] focus:ring-2 focus:ring-[#F25C05] focus:ring-offset-0"}),(0,d.jsx)("span",{className:"jsx-2c8bf314faae8ebd text-sm text-[#cdd6f4]",children:a.name})]},a.id))}),C.campaign_ids.length>0&&(0,d.jsx)("div",{className:"jsx-2c8bf314faae8ebd mt-2 border-t border-[#313244] pt-2",children:(0,d.jsxs)("span",{className:"jsx-2c8bf314faae8ebd text-xs text-[#6c7086]",children:[C.campaign_ids.length," campaign",1!==C.campaign_ids.length?"s":""," selected"]})})]}),E.campaign_ids&&(0,d.jsx)("p",{className:"jsx-2c8bf314faae8ebd mt-1 text-sm text-red-400",children:E.campaign_ids})]})]}),(0,d.jsxs)("div",{className:"jsx-2c8bf314faae8ebd mt-6 flex justify-end gap-3 border-t border-[#313244] pt-4",children:[(0,d.jsx)("button",{type:"button",onClick:b,disabled:g,className:"jsx-2c8bf314faae8ebd rounded-lg border border-[#313244] bg-transparent px-4 py-2 text-sm font-medium text-[#cdd6f4] transition-colors hover:bg-[#313244] disabled:opacity-50",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",disabled:g,className:`jsx-2c8bf314faae8ebd flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${s?"bg-[#f9e2af] text-[#1e1e2e] hover:bg-[#f9e2af]/90":"bg-[#F25C05] text-white hover:bg-[#ff6b1a]"}`,children:g?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("svg",{viewBox:"0 0 24 24",className:"jsx-2c8bf314faae8ebd h-4 w-4 animate-spin",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none",className:"jsx-2c8bf314faae8ebd opacity-25"}),(0,d.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"jsx-2c8bf314faae8ebd opacity-75"})]}),"Creating..."]}):s?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.A,{className:"h-4 w-4"}),"Add Anyway"]}):"Create Contact"})]})]})]}),(0,d.jsx)(i(),{id:"2c8bf314faae8ebd",children:"@keyframes slideUp{from{opacity:0;transform:translatey(20px)}to{opacity:1;transform:translatey(0)}}"}),z&&(0,d.jsx)(v,{contactId:z,isOpen:!0,onClose:()=>A(null),onContactUpdated:()=>{},onContactDeleted:()=>{}})]}):null}var z=c(61796);let A=e.forwardRef(function({title:a,titleId:b,...c},d){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?e.createElement("title",{id:b},a):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))});var B=c(89475),C=c.n(B);async function D(a){return new Promise((b,c)=>{let d=[],e=[],f=0;C().parse(a,{header:!0,skipEmptyLines:!0,transformHeader:a=>a.trim(),complete:a=>{f=a.data.length,a.data.forEach((a,b)=>{let c,f=b+2;if(!a["First Name"]||!a["Last Name"]||!a.URL)return void e.push({row:f,message:"Missing required fields (First Name, Last Name, or URL)"});if(!/^https:\/\/www\.linkedin\.com\/in\/[a-zA-Z0-9_-]+\/?$/.test(a.URL))return void e.push({row:f,message:"Invalid LinkedIn URL format"});if(a["Connected On"]){let b=new Date(a["Connected On"]);isNaN(b.getTime())?e.push({row:f,message:`Invalid date format in Connected On: ${a["Connected On"]}`}):c=b.toISOString().split("T")[0]}let g={first_name:a["First Name"].trim(),last_name:a["Last Name"].trim(),linkedin_url:a.URL.trim(),email:a["Email Address"]?.trim()||void 0,company:a.Company?.trim()||void 0,position:a.Position?.trim()||void 0,connected_on:c,source:"CSV Import"};d.push(g)}),b({contacts:d,errors:e,totalRows:f,validRows:d.length})},error:a=>{c(Error(`CSV parsing failed: ${a.message}`))}})})}function E({isOpen:a,onClose:b,onSuccess:c}){let[g,h]=(0,e.useState)(1),[i,k]=(0,e.useState)(null),[l,n]=(0,e.useState)(null),[o,p]=(0,e.useState)([]),[q,r]=(0,e.useState)([]),[s,t]=(0,e.useState)([]),[u,v]=(0,e.useState)(!1),[w,x]=(0,e.useState)(!1),[y,B]=(0,e.useState)(null),[C,E]=(0,e.useState)(!1),[F,G]=(0,e.useState)(!1),[H,I]=(0,e.useState)(!1),[J,K]=(0,e.useState)({imported:0,updated:0,skipped:0}),[L,M]=(0,e.useState)(!1),[N,O]=(0,e.useState)([]),[P,Q]=(0,e.useState)(0),[R,S]=(0,e.useState)(new Map),T=(0,e.useRef)(null),U=async a=>{if((B(null),a.name.toLowerCase().endsWith(".csv"))&&!(a.size>5242880)||(B("Invalid file. Please upload a .csv file under 5MB."),0)){k(a),x(!0),B(null),p([]);try{let b=await D(a);b.errors.length>0?(p(b.errors),n(null)):(n(b),p([]))}catch(a){B("Failed to parse CSV file. Please ensure it is a valid LinkedIn export."),console.error("CSV parsing error:",a)}finally{x(!1)}}},V=(0,e.useCallback)(async()=>{if(!L)try{let a=await fetch("/api/campaigns");if(a.ok){let b=await a.json();t(b.campaigns||[]),M(!0)}}catch(a){console.error("Failed to fetch campaigns:",a)}},[L]),W=async()=>{if(1===g&&l)await V(),h(2);else if(2===g){x(!0);try{let a=await fetch("/api/contacts/check-duplicates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contacts:l?.contacts||[]})});if(a.ok){let b=await a.json();if(b.duplicates&&b.duplicates.length>0){O(b.duplicates),Q(0);let a=new Map;b.duplicates.forEach(b=>{a.set(b.csvIndex,"import")}),S(a),h(3)}else h(4)}}catch(a){console.error("Duplicate check error:",a),h(4)}finally{x(!1)}}else 3===g&&h(4)},X=async()=>{G(!0);try{let a=await fetch("/api/contacts/bulk-import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contacts:l?.contacts||[],campaign_ids:q,overwrite_ids:[]})});if(a.ok){let b=await a.json();K({imported:b.imported||0,updated:b.updated||0,skipped:b.skipped||0}),I(!0)}else throw Error("Import failed")}catch(a){console.error("Import error:",a),B("Failed to import contacts. Please try again.")}finally{G(!1)}},Y=()=>{g>1||i?E(!0):$()},Z=(a,b)=>{S(c=>{let d=new Map(c);return d.set(a,b),d})},$=()=>{h(1),k(null),n(null),p([]),r([]),B(null),x(!1),G(!1),I(!1),E(!1),M(!1),O([]),Q(0),S(new Map),b()};if(!a)return null;if(H){let a=s.filter(a=>q.includes(a.id)).map(a=>a.name);return(0,d.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-8",children:(0,d.jsxs)("div",{className:"bg-[#181825] border border-[#313244] rounded-2xl max-w-[500px] w-full p-8 shadow-2xl",children:[(0,d.jsx)("div",{className:"flex justify-center mb-6",children:(0,d.jsx)("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center",children:(0,d.jsx)(z.A,{className:"w-8 h-8 text-green-500"})})}),(0,d.jsx)("h2",{className:"text-2xl font-bold text-[#cdd6f4] text-center mb-4",children:"Import Complete!"}),(0,d.jsxs)("div",{className:"space-y-3 mb-6 p-4 bg-[#1e1e2e] rounded-lg",children:[(0,d.jsxs)("div",{className:"flex justify-between text-[#cdd6f4]",children:[(0,d.jsx)("span",{children:"Successfully imported:"}),(0,d.jsxs)("span",{className:"font-semibold",children:[J.imported," contacts"]})]}),(0,d.jsxs)("div",{className:"flex justify-between text-[#a6adc8]",children:[(0,d.jsx)("span",{children:"Updated:"}),(0,d.jsxs)("span",{children:[J.updated," contacts"]})]}),(0,d.jsxs)("div",{className:"flex justify-between text-[#a6adc8]",children:[(0,d.jsx)("span",{children:"Skipped:"}),(0,d.jsxs)("span",{children:[J.skipped," duplicates"]})]})]}),a.length>0&&(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("p",{className:"text-sm text-[#a6adc8] mb-2",children:"All contacts assigned to:"}),(0,d.jsx)("ul",{className:"space-y-1",children:a.map((a,b)=>(0,d.jsxs)("li",{className:"text-sm text-[#cdd6f4] flex items-center gap-2",children:[(0,d.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-[#F25C05]"}),a]},b))})]}),(0,d.jsx)("button",{onClick:()=>{$(),c()},className:"w-full bg-[#F25C05] hover:bg-[#D94C04] text-white font-semibold px-4 py-3 rounded-lg shadow-[0_2px_8px_rgba(242,92,5,0.3)] hover:shadow-[0_4px_12px_rgba(242,92,5,0.4)] hover:-translate-y-0.5 transition-all duration-200",children:"View Contacts"})]})})}return C?(0,d.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-8",children:(0,d.jsxs)("div",{className:"bg-[#181825] border border-[#313244] rounded-2xl max-w-[400px] w-full p-6 shadow-2xl",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-[#cdd6f4] mb-3",children:"Cancel Upload?"}),(0,d.jsx)("p",{className:"text-sm text-[#a6adc8] mb-6",children:"Are you sure? All progress will be lost."}),(0,d.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,d.jsx)("button",{onClick:()=>E(!1),className:"bg-[#313244] hover:bg-[#45475a] text-[#cdd6f4] font-semibold px-4 py-2 rounded-lg transition-all duration-200",children:"Continue Upload"}),(0,d.jsx)("button",{onClick:()=>{E(!1),$()},className:"bg-red-500/20 hover:bg-red-500/30 text-red-400 font-semibold px-4 py-2 rounded-lg transition-all duration-200",children:"Yes, Cancel"})]})]})}):(0,d.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-8",children:(0,d.jsxs)("div",{className:"bg-[#181825] border border-[#313244] rounded-2xl max-w-[800px] w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,d.jsx)(()=>(0,d.jsx)("div",{className:"flex items-center justify-center gap-2 mb-8 px-6 pt-6",children:[1,2,3,4].map((a,b)=>(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:`
            w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm transition-all duration-200
            ${a<g?"bg-[#F25C05] text-white":""}
            ${a===g?"bg-[#F25C05] text-white ring-2 ring-[#F25C05] ring-offset-2 ring-offset-[#181825]":""}
            ${a>g?"bg-transparent border-2 border-[#6c7086] text-[#6c7086]":""}
          `,children:a<g?(0,d.jsx)(z.A,{className:"w-5 h-5"}):a}),b<3&&(0,d.jsx)("div",{className:`h-0.5 w-8 transition-colors duration-200 ${a<g?"bg-[#F25C05]":"bg-[#45475a]"}`})]},a))}),{}),(0,d.jsx)("div",{className:"px-6 pb-4 border-b border-[#313244]",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("h2",{className:"text-xl font-bold text-[#cdd6f4]",children:["Step ",g," of 4: ",1===g?"Upload CSV File":2===g?"Preview Contacts":3===g?"Resolve Duplicates":"Confirm Import"]}),(0,d.jsx)("button",{onClick:Y,className:"text-[#a6adc8] hover:text-[#cdd6f4] transition-colors",children:(0,d.jsx)(j.A,{className:"w-6 h-6"})})]})}),(0,d.jsxs)("div",{className:"p-6",children:[1===g&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{onDragOver:a=>{a.preventDefault(),v(!0)},onDragLeave:()=>{v(!1)},onDrop:a=>{a.preventDefault(),v(!1);let b=a.dataTransfer.files[0];b&&U(b)},onClick:()=>{T.current?.click()},className:`
                  h-[200px] border-2 border-dashed rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all duration-200
                  ${u?"border-[#F25C05] bg-[rgba(242,92,5,0.1)] border-solid":y?"border-red-500 bg-red-500/10":"border-[#45475a] bg-[#313244] hover:border-[#F25C05] hover:bg-[rgba(242,92,5,0.05)]"}
                `,children:[(0,d.jsx)("input",{ref:T,type:"file",accept:".csv",onChange:a=>{let b=a.target.files?.[0];b&&U(b)},className:"hidden"}),(0,d.jsx)(f,{className:"w-12 h-12 text-[#a6adc8] mb-3"}),(0,d.jsx)("p",{className:"text-[#cdd6f4] font-medium mb-1",children:"\uD83D\uDCC1 Drag and drop CSV file here or click to browse"}),(0,d.jsx)("p",{className:"text-sm text-[#6c7086]",children:"Supported: .csv files only"})]}),(0,d.jsx)("div",{className:"mt-4 p-3 bg-[#1e1e2e] rounded-lg border border-[#313244]",children:(0,d.jsxs)("p",{className:"text-sm text-[#a6adc8]",children:["\uD83D\uDCA1 ",(0,d.jsx)("span",{className:"font-semibold",children:"Tip:"})," Export from LinkedIn: Connections → Manage synced contacts → Download"]})}),w&&(0,d.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-3",children:[(0,d.jsx)("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-[#313244] border-t-[#F25C05]"}),(0,d.jsx)("p",{className:"text-sm text-[#a6adc8]",children:"Parsing CSV..."})]}),y&&(0,d.jsx)("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:(0,d.jsx)("p",{className:"text-sm text-red-400",children:y})}),o.length>0&&(0,d.jsxs)("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:[(0,d.jsxs)("p",{className:"text-sm font-semibold text-red-400 mb-2",children:["Found ",o.length," errors in CSV file"]}),(0,d.jsx)("ul",{className:"space-y-1 mb-3",children:o.slice(0,10).map((a,b)=>(0,d.jsxs)("li",{className:"text-xs text-red-300",children:["Row ",a.row,": ",a.message]},b))}),o.length>10&&(0,d.jsxs)("p",{className:"text-xs text-red-300 mb-3",children:["and ",o.length-10," more..."]}),(0,d.jsx)("button",{onClick:()=>{let a=new Blob([o.map(a=>`Row ${a.row}: ${a.message}`).join("\n")],{type:"text/plain"}),b=URL.createObjectURL(a),c=document.createElement("a");c.href=b,c.download="csv-errors.txt",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(b)},className:"text-xs text-red-400 hover:text-red-300 underline",children:"Download Error Report"})]}),l&&(0,d.jsx)("div",{className:"mt-4 p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:(0,d.jsxs)("p",{className:"text-sm text-green-400",children:["✓ Successfully parsed: ",l.validRows," contacts"]})})]}),2===g&&l&&(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"mb-6 p-4 bg-[#1e1e2e] rounded-lg border border-[#313244]",children:(0,d.jsxs)("p",{className:"text-[#cdd6f4] font-medium",children:["Successfully parsed: ",(0,d.jsx)("span",{className:"text-[#F25C05]",children:l.validRows})," contacts"]})}),(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-[#cdd6f4] mb-2",children:["Assign to Campaign(s): ",(0,d.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,d.jsxs)("div",{className:"space-y-2 max-h-[150px] overflow-y-auto p-3 bg-[#1e1e2e] rounded-lg border border-[#313244]",children:[s.map(a=>(0,d.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-[#313244] p-2 rounded transition-colors",children:[(0,d.jsx)("input",{type:"checkbox",checked:q.includes(a.id),onChange:()=>{var b;return b=a.id,void r(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])},className:"w-4 h-4 text-[#F25C05] bg-[#313244] border-[#45475a] rounded focus:ring-[#F25C05] focus:ring-2"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"text-sm text-[#cdd6f4] font-medium",children:a.name}),a.description&&(0,d.jsx)("p",{className:"text-xs text-[#6c7086]",children:a.description})]})]},a.id)),0===s.length&&(0,d.jsx)("p",{className:"text-sm text-[#6c7086] text-center py-2",children:"No campaigns available"})]})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-[#cdd6f4] mb-3",children:"Contact Preview"}),(0,d.jsx)("div",{className:"overflow-x-auto rounded-lg border border-[#313244]",children:(0,d.jsxs)("table",{className:"w-full",children:[(0,d.jsx)("thead",{className:"border-b border-[#313244] bg-[#1e1e2e]",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"text-left px-3 py-3 text-xs font-semibold uppercase tracking-wider text-[#7f849c]",children:"Name"}),(0,d.jsx)("th",{className:"text-left px-3 py-3 text-xs font-semibold uppercase tracking-wider text-[#7f849c]",children:"Company"}),(0,d.jsx)("th",{className:"text-left px-3 py-3 text-xs font-semibold uppercase tracking-wider text-[#7f849c]",children:"Position"}),(0,d.jsx)("th",{className:"text-left px-3 py-3 text-xs font-semibold uppercase tracking-wider text-[#7f849c]",children:"LinkedIn"})]})}),(0,d.jsx)("tbody",{children:l.contacts.slice(0,5).map((a,b)=>(0,d.jsxs)("tr",{className:"border-b border-[#313244] hover:bg-[rgba(242,92,5,0.03)] transition-colors",children:[(0,d.jsxs)("td",{className:"px-3 py-3 text-sm text-[#cdd6f4]",children:[a.first_name," ",a.last_name]}),(0,d.jsx)("td",{className:"px-3 py-3 text-sm text-[#a6adc8]",children:a.company||"-"}),(0,d.jsx)("td",{className:"px-3 py-3 text-sm text-[#a6adc8]",children:a.position||"-"}),(0,d.jsx)("td",{className:"px-3 py-3 text-sm",children:a.linkedin_url?(0,d.jsx)("a",{href:a.linkedin_url,target:"_blank",rel:"noopener noreferrer",className:"text-[#F25C05] hover:underline",children:"View"}):"-"})]},b))})]})}),l.contacts.length>5&&(0,d.jsxs)("p",{className:"text-xs text-[#6c7086] mt-2 text-center",children:["... and ",l.contacts.length-5," more"]})]})]}),3===g&&N.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:[(0,d.jsxs)("p",{className:"text-sm text-yellow-400 flex items-center gap-2",children:[(0,d.jsx)("span",{className:"text-lg",children:"⚠️"}),"Found ",N.length," potential duplicate",1!==N.length?"s":""]}),(0,d.jsx)("p",{className:"text-xs text-[#a6adc8] mt-1",children:"For each duplicate, choose an action"})]}),N[P]&&(0,d.jsxs)("div",{className:"mb-6 p-6 bg-[#313244] border border-[#45475a] rounded-xl",children:[(0,d.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,d.jsxs)("h3",{className:"text-lg font-semibold text-[#cdd6f4]",children:[N[P].csvContact.first_name," ",N[P].csvContact.last_name]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${"high"===N[P].confidence?"bg-red-500/20 text-red-400 border border-red-500/30":"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30"}`,children:"high"===N[P].confidence?"High confidence":"Possible duplicate"}),(0,d.jsx)("span",{className:"text-xs text-[#6c7086]",children:"linkedin_url"===N[P].matchType?"LinkedIn URL match":"Name match"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("h4",{className:"text-sm font-semibold text-[#F25C05] uppercase tracking-wide mb-3",children:"From CSV"}),(0,d.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-[#6c7086]",children:"Company:"}),(0,d.jsx)("span",{className:"ml-2 text-[#cdd6f4]",children:N[P].csvContact.company||"—"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-[#6c7086]",children:"Position:"}),(0,d.jsx)("span",{className:"ml-2 text-[#cdd6f4]",children:N[P].csvContact.position||"—"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-[#6c7086]",children:"Email:"}),(0,d.jsx)("span",{className:"ml-2 text-[#cdd6f4]",children:N[P].csvContact.email||"—"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-[#6c7086]",children:"LinkedIn:"}),(0,d.jsx)("span",{className:"ml-2 text-[#89b4fa] text-xs break-all",children:N[P].csvContact.linkedin_url})]})]})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("h4",{className:"text-sm font-semibold text-[#89b4fa] uppercase tracking-wide mb-3",children:"Already in Database"}),(0,d.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-[#6c7086]",children:"Company:"}),(0,d.jsx)("span",{className:"ml-2 text-[#cdd6f4]",children:N[P].existingContact.company||"—"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-[#6c7086]",children:"Position:"}),(0,d.jsx)("span",{className:"ml-2 text-[#cdd6f4]",children:N[P].existingContact.position||"—"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-[#6c7086]",children:"Email:"}),(0,d.jsx)("span",{className:"ml-2 text-[#cdd6f4]",children:N[P].existingContact.email||"—"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-[#6c7086]",children:"LinkedIn:"}),(0,d.jsx)("span",{className:"ml-2 text-[#89b4fa] text-xs break-all",children:N[P].existingContact.linkedin_url})]}),(0,d.jsx)("div",{className:"pt-2",children:(0,d.jsxs)("span",{className:"text-xs text-[#6c7086]",children:["Created: ",new Date(N[P].existingContact.created_at).toLocaleDateString()]})})]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h4",{className:"text-sm font-semibold text-[#cdd6f4] mb-3",children:"Choose Action:"}),(0,d.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-[#1e1e2e] border border-[#45475a] rounded-lg cursor-pointer hover:border-[#F25C05] transition-colors",children:[(0,d.jsx)("input",{type:"radio",name:`duplicate-${P}`,checked:"update"===R.get(N[P].csvIndex),onChange:()=>Z(N[P].csvIndex,"update"),className:"w-4 h-4 text-[#F25C05] bg-[#313244] border-[#45475a] focus:ring-[#F25C05] focus:ring-2"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-[#cdd6f4]",children:"Update existing with CSV data"}),(0,d.jsx)("p",{className:"text-xs text-[#6c7086]",children:"Overwrites the existing contact"})]})]}),(0,d.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-[#1e1e2e] border border-[#45475a] rounded-lg cursor-pointer hover:border-[#F25C05] transition-colors",children:[(0,d.jsx)("input",{type:"radio",name:`duplicate-${P}`,checked:"skip"===R.get(N[P].csvIndex),onChange:()=>Z(N[P].csvIndex,"skip"),className:"w-4 h-4 text-[#F25C05] bg-[#313244] border-[#45475a] focus:ring-[#F25C05] focus:ring-2"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-[#cdd6f4]",children:"Skip (keep existing)"}),(0,d.jsx)("p",{className:"text-xs text-[#6c7086]",children:"Don't import this CSV row"})]})]}),(0,d.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-[#1e1e2e] border border-[#45475a] rounded-lg cursor-pointer hover:border-[#F25C05] transition-colors",children:[(0,d.jsx)("input",{type:"radio",name:`duplicate-${P}`,checked:"import"===R.get(N[P].csvIndex),onChange:()=>Z(N[P].csvIndex,"import"),className:"w-4 h-4 text-[#F25C05] bg-[#313244] border-[#45475a] focus:ring-[#F25C05] focus:ring-2"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-[#cdd6f4]",children:"Import as new contact"}),(0,d.jsx)("p",{className:"text-xs text-[#6c7086]",children:"Create a new contact despite duplicate warning"})]})]})]})]}),(0,d.jsxs)("div",{className:"mb-6 flex items-center justify-between p-4 bg-[#1e1e2e] rounded-lg border border-[#313244]",children:[(0,d.jsxs)("button",{onClick:()=>{P>0&&Q(P-1)},disabled:0===P,className:"flex items-center gap-2 px-3 py-2 bg-[#313244] hover:bg-[#45475a] text-[#cdd6f4] rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:[(0,d.jsx)(m.A,{className:"w-4 h-4"}),"Previous"]}),(0,d.jsxs)("span",{className:"text-sm text-[#a6adc8]",children:[P+1," of ",N.length]}),(0,d.jsxs)("button",{onClick:()=>{P<N.length-1&&Q(P+1)},disabled:P===N.length-1,className:"flex items-center gap-2 px-3 py-2 bg-[#313244] hover:bg-[#45475a] text-[#cdd6f4] rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:["Next",(0,d.jsx)(A,{className:"w-4 h-4"})]})]}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("h4",{className:"text-sm font-semibold text-[#cdd6f4] mb-3",children:"Quick Actions:"}),(0,d.jsxs)("div",{className:"flex gap-3",children:[(0,d.jsx)("button",{onClick:()=>{let a=new Map(R);N.forEach(b=>{a.set(b.csvIndex,"update")}),S(a)},className:"flex-1 px-4 py-2 bg-[#313244] hover:bg-[#45475a] text-[#cdd6f4] text-sm font-medium rounded-lg border border-[#45475a] transition-colors",children:"Update All"}),(0,d.jsx)("button",{onClick:()=>{let a=new Map(R);N.forEach(b=>{a.set(b.csvIndex,"skip")}),S(a)},className:"flex-1 px-4 py-2 bg-[#313244] hover:bg-[#45475a] text-[#cdd6f4] text-sm font-medium rounded-lg border border-[#45475a] transition-colors",children:"Skip All"}),(0,d.jsx)("button",{onClick:()=>{let a=new Map(R);N.forEach(b=>{a.set(b.csvIndex,"import")}),S(a)},className:"flex-1 px-4 py-2 bg-[#313244] hover:bg-[#45475a] text-[#cdd6f4] text-sm font-medium rounded-lg border border-[#45475a] transition-colors",children:"Import All"})]})]})]}),4===g&&l&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"mb-6 p-4 bg-[#1e1e2e] rounded-lg border border-[#313244] space-y-3",children:[(0,d.jsxs)("div",{className:"flex justify-between text-[#cdd6f4]",children:[(0,d.jsxs)("span",{className:"flex items-center gap-2",children:[(0,d.jsx)(z.A,{className:"w-4 h-4 text-green-500"}),"New contacts"]}),(0,d.jsx)("span",{className:"font-semibold",children:l.validRows})]}),(0,d.jsxs)("div",{className:"flex justify-between text-[#6c7086]",children:[(0,d.jsxs)("span",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"text-lg",children:"⟳"}),"Updated contacts (duplicates)"]}),(0,d.jsx)("span",{children:"0"})]}),(0,d.jsxs)("div",{className:"flex justify-between text-[#6c7086]",children:[(0,d.jsxs)("span",{className:"flex items-center gap-2",children:[(0,d.jsx)(j.A,{className:"w-4 h-4"}),"Skipped (duplicates)"]}),(0,d.jsx)("span",{children:"0"})]}),(0,d.jsxs)("div",{className:"pt-3 border-t border-[#313244] flex justify-between text-[#cdd6f4] font-semibold",children:[(0,d.jsx)("span",{children:"Total from CSV"}),(0,d.jsx)("span",{children:l.totalRows})]})]}),q.length>0&&(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-[#cdd6f4] mb-2",children:"Campaigns:"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:s.filter(a=>q.includes(a.id)).map(a=>(0,d.jsx)("span",{className:"px-3 py-1 bg-[#F25C05]/20 text-[#F25C05] text-sm rounded-full border border-[#F25C05]/30",children:a.name},a.id))})]}),(0,d.jsx)("div",{className:"mb-6 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:(0,d.jsxs)("p",{className:"text-sm text-yellow-400 flex items-center gap-2",children:[(0,d.jsx)("span",{className:"text-lg",children:"⚠️"}),"This action will modify your database"]})}),F&&(0,d.jsxs)("div",{className:"mb-4 flex items-center justify-center gap-3",children:[(0,d.jsx)("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-[#313244] border-t-[#F25C05]"}),(0,d.jsxs)("p",{className:"text-sm text-[#a6adc8]",children:["Importing ",l.validRows," contacts..."]})]}),y&&(0,d.jsx)("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:(0,d.jsx)("p",{className:"text-sm text-red-400",children:y})})]})]}),(0,d.jsxs)("div",{className:"px-6 py-4 border-t border-[#313244] flex justify-between",children:[(0,d.jsx)("button",{onClick:Y,className:"bg-[#313244] hover:bg-[#45475a] text-[#cdd6f4] font-semibold px-4 py-2 rounded-lg border border-[#45475a] transition-all duration-200",children:"Cancel"}),(0,d.jsxs)("div",{className:"flex gap-3",children:[g>1&&g<4&&(0,d.jsxs)("button",{onClick:()=>{2===g?h(1):3===g?h(2):4===g&&(N.length>0?h(3):h(2))},disabled:w,className:"flex items-center gap-2 bg-[#313244] hover:bg-[#45475a] text-[#cdd6f4] font-semibold px-4 py-2 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,d.jsx)(m.A,{className:"w-4 h-4"}),"Back"]}),1===g&&(0,d.jsxs)("button",{onClick:W,disabled:!l||w,className:"flex items-center gap-2 bg-[#F25C05] hover:bg-[#D94C04] text-white font-semibold px-4 py-2 rounded-lg shadow-[0_2px_8px_rgba(242,92,5,0.3)] hover:shadow-[0_4px_12px_rgba(242,92,5,0.4)] hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:["Next",(0,d.jsx)(A,{className:"w-4 h-4"})]}),2===g&&(0,d.jsxs)("button",{onClick:W,disabled:0===q.length||w,className:"flex items-center gap-2 bg-[#F25C05] hover:bg-[#D94C04] text-white font-semibold px-4 py-2 rounded-lg shadow-[0_2px_8px_rgba(242,92,5,0.3)] hover:shadow-[0_4px_12px_rgba(242,92,5,0.4)] hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:[w?"Checking...":"Next: Check Duplicates",(0,d.jsx)(A,{className:"w-4 h-4"})]}),3===g&&(0,d.jsxs)("button",{onClick:W,className:"flex items-center gap-2 bg-[#F25C05] hover:bg-[#D94C04] text-white font-semibold px-4 py-2 rounded-lg shadow-[0_2px_8px_rgba(242,92,5,0.3)] hover:shadow-[0_4px_12px_rgba(242,92,5,0.4)] hover:-translate-y-0.5 transition-all duration-200",children:["Next: Confirm Import",(0,d.jsx)(A,{className:"w-4 h-4"})]}),4===g&&(0,d.jsx)("button",{onClick:X,disabled:F,className:"bg-[#F25C05] hover:bg-[#D94C04] text-white font-semibold px-6 py-2 rounded-lg shadow-[0_2px_8px_rgba(242,92,5,0.3)] hover:shadow-[0_4px_12px_rgba(242,92,5,0.4)] hover:-translate-y-0.5 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:F?"Importing...":"Import Contacts"})]})]})]})})}var F=c(56407);function G({onSearchChange:a,onFilterChange:b,onSortChange:c,campaigns:f=[]}){let[g,h]=(0,e.useState)("");return(0,d.jsxs)("div",{className:"mb-6 flex gap-4",children:[(0,d.jsxs)("div",{className:"relative flex-1",children:[(0,d.jsx)(F.A,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-[#7f849c]"}),(0,d.jsx)("input",{type:"text",value:g,onChange:a=>h(a.target.value),placeholder:"Search by name, company, or position...",className:"w-full rounded-lg border border-[#45475a] bg-[#313244] py-3 pl-12 pr-4 text-[#cdd6f4] placeholder-[#6c7086] transition-all duration-200 focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]"})]}),(0,d.jsxs)("select",{onChange:a=>b(a.target.value),className:"cursor-pointer rounded-lg border border-[#45475a] bg-[#313244] px-4 py-3 text-[#cdd6f4] transition-all duration-200 hover:bg-[#45475a] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]",children:[(0,d.jsx)("option",{value:"all",children:"All Contacts"}),(0,d.jsx)("option",{value:"my",children:"My Contacts"}),(0,d.jsx)("option",{value:"unassigned",children:"Unassigned"}),f.map(a=>(0,d.jsx)("option",{value:`campaign-${a.id}`,children:a.name},a.id))]}),(0,d.jsxs)("select",{onChange:a=>c(a.target.value),defaultValue:"recent",className:"cursor-pointer rounded-lg border border-[#45475a] bg-[#313244] px-4 py-3 text-[#cdd6f4] transition-all duration-200 hover:bg-[#45475a] focus:border-[#F25C05] focus:outline-none focus:ring-1 focus:ring-[#F25C05]",children:[(0,d.jsx)("option",{value:"recent",children:"Recently Added"}),(0,d.jsx)("option",{value:"name-asc",children:"Name A-Z"}),(0,d.jsx)("option",{value:"name-desc",children:"Name Z-A"}),(0,d.jsx)("option",{value:"company",children:"Company A-Z"})]})]})}function H({contacts:a,loading:b=!1,onViewContact:c}){return b?(0,d.jsx)("div",{className:"flex h-64 items-center justify-center rounded-xl border border-[#313244] bg-[#181825] p-6",children:(0,d.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,d.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-[#313244] border-t-[#F25C05]"}),(0,d.jsx)("p",{className:"text-sm text-[#a6adc8]",children:"Loading contacts..."})]})}):0===a.length?(0,d.jsx)("div",{className:"flex h-64 items-center justify-center rounded-xl border border-[#313244] bg-[#181825] p-6",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("p",{className:"text-base text-[#a6adc8]",children:"No contacts found"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-[#6c7086]",children:"Try adjusting your search or filter criteria"})]})}):(0,d.jsx)("div",{className:"overflow-x-auto rounded-xl border border-[#313244] bg-[#181825] p-6",children:(0,d.jsxs)("table",{className:"w-full border-collapse",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"border-b border-[#313244]",children:[(0,d.jsx)("th",{className:"px-2 py-3 text-left text-xs font-semibold uppercase tracking-wider text-[#7f849c]",children:"Name"}),(0,d.jsx)("th",{className:"px-2 py-3 text-left text-xs font-semibold uppercase tracking-wider text-[#7f849c]",children:"Company"}),(0,d.jsx)("th",{className:"px-2 py-3 text-left text-xs font-semibold uppercase tracking-wider text-[#7f849c]",children:"Campaign(s)"}),(0,d.jsx)("th",{className:"hidden px-2 py-3 text-left text-xs font-semibold uppercase tracking-wider text-[#7f849c] lg:table-cell",children:"Owner"}),(0,d.jsx)("th",{className:"hidden px-2 py-3 text-left text-xs font-semibold uppercase tracking-wider text-[#7f849c] xl:table-cell",children:"Connected On"}),(0,d.jsx)("th",{className:"px-2 py-3 text-right text-xs font-semibold uppercase tracking-wider text-[#7f849c]",children:"Actions"})]})}),(0,d.jsx)("tbody",{children:a.map(a=>{var b;return(0,d.jsxs)("tr",{className:"border-b border-[#313244] transition-colors duration-150 last:border-b-0 hover:bg-[rgba(242,92,5,0.03)]",children:[(0,d.jsx)("td",{className:"px-2 py-4",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(q,{firstName:a.first_name,lastName:a.last_name}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("button",{onClick:()=>c(a.id),className:"font-bold text-[#cdd6f4] transition-colors duration-200 hover:text-[#F25C05]",children:[a.first_name," ",a.last_name]}),a.position&&(0,d.jsx)("p",{className:"text-sm text-[#6c7086]",children:a.position})]})]})}),(0,d.jsx)("td",{className:"px-2 py-4",children:(0,d.jsx)("span",{className:"text-sm text-[#cdd6f4]",children:a.company||"—"})}),(0,d.jsx)("td",{className:"px-2 py-4",children:(0,d.jsx)(r,{campaigns:a.campaigns})}),(0,d.jsx)("td",{className:"hidden px-2 py-4 lg:table-cell",children:(0,d.jsx)("span",{className:"text-sm text-[#a6adc8]",children:a.owner_id?"Assigned":"Unassigned"})}),(0,d.jsx)("td",{className:"hidden px-2 py-4 xl:table-cell",children:(0,d.jsx)("span",{className:"text-sm text-[#a6adc8]",children:(b=a.connected_on)?new Date(b).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"—"})}),(0,d.jsx)("td",{className:"px-2 py-4",children:(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,d.jsx)("button",{onClick:()=>c(a.id),className:"rounded-lg p-2 text-[#a6adc8] transition-colors duration-200 hover:bg-[#313244] hover:text-[#F25C05]","aria-label":"View contact",children:(0,d.jsx)(p,{className:"h-5 w-5"})}),(0,d.jsx)("button",{onClick:()=>c(a.id),className:"rounded-lg p-2 text-[#a6adc8] transition-colors duration-200 hover:bg-[#313244] hover:text-[#F25C05]","aria-label":"Edit contact",children:(0,d.jsx)(n.A,{className:"h-5 w-5"})})]})})]},a.id)})})]})})}function I({contact:a,onViewContact:b}){var c;return(0,d.jsxs)("div",{className:"rounded-xl border border-[#313244] bg-[#181825] p-4",children:[(0,d.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,d.jsx)(q,{firstName:a.first_name,lastName:a.last_name,size:"lg"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("button",{onClick:()=>b(a.id),className:"font-bold text-[#cdd6f4] transition-colors duration-200 hover:text-[#F25C05]",children:[a.first_name," ",a.last_name]}),a.position&&(0,d.jsx)("p",{className:"text-sm text-[#6c7086]",children:a.position})]})]}),(0,d.jsxs)("div",{className:"mb-4 space-y-2 border-t border-[#313244] pt-4",children:[a.company&&(0,d.jsxs)("div",{className:"flex items-start gap-2",children:[(0,d.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-[#7f849c]",children:"Company:"}),(0,d.jsx)("span",{className:"text-sm text-[#cdd6f4]",children:a.company})]}),(0,d.jsxs)("div",{className:"flex items-start gap-2",children:[(0,d.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-[#7f849c]",children:"Campaign:"}),(0,d.jsx)("div",{className:"flex-1",children:(0,d.jsx)(r,{campaigns:a.campaigns})})]}),a.connected_on&&(0,d.jsxs)("div",{className:"flex items-start gap-2",children:[(0,d.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-[#7f849c]",children:"Connected:"}),(0,d.jsx)("span",{className:"text-sm text-[#a6adc8]",children:(c=a.connected_on)?new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"—"})]})]}),(0,d.jsxs)("div",{className:"flex justify-end gap-2 border-t border-[#313244] pt-4",children:[(0,d.jsxs)("button",{onClick:()=>b(a.id),className:"flex items-center gap-2 rounded-lg bg-[#313244] px-4 py-2 text-sm font-medium text-[#cdd6f4] transition-colors duration-200 hover:bg-[#45475a] hover:text-[#F25C05]","aria-label":"View contact",children:[(0,d.jsx)(p,{className:"h-5 w-5"}),"View"]}),(0,d.jsxs)("button",{onClick:()=>b(a.id),className:"flex items-center gap-2 rounded-lg bg-[#313244] px-4 py-2 text-sm font-medium text-[#cdd6f4] transition-colors duration-200 hover:bg-[#45475a] hover:text-[#F25C05]","aria-label":"Edit contact",children:[(0,d.jsx)(n.A,{className:"h-5 w-5"}),"Edit"]})]})]})}function J(){let[a,b]=(0,e.useState)(!1),[c,h]=(0,e.useState)(!1),[i,j]=(0,e.useState)(!1),[k,l]=(0,e.useState)(null),[m,n]=(0,e.useState)([]),[o,p]=(0,e.useState)([]),[q,r]=(0,e.useState)(!0),[t,u]=(0,e.useState)(null),[w,x]=(0,e.useState)(""),[z,A]=(0,e.useState)("all"),[B,C]=(0,e.useState)("recent"),{showToast:D}=(0,s.d)(),F=(0,e.useCallback)(async()=>{try{r(!0),u(null);let a=new URLSearchParams({search:w,filter:z,sort:B}),b=await fetch(`/api/contacts?${a}`);if(!b.ok)throw Error("Failed to fetch contacts");let c=await b.json();n(c.contacts)}catch(a){console.error("Error fetching contacts:",a),u("Failed to load contacts. Please try again."),D("Failed to load contacts","error")}finally{r(!1)}},[w,z,B,D]);(0,e.useCallback)(async()=>{try{let a=await fetch("/api/campaigns");if(a.ok){let b=await a.json();p(b.campaigns)}}catch(a){console.error("Error fetching campaigns:",a)}},[]);let J=a=>{l(a),h(!0)};return(0,d.jsxs)("div",{className:"max-w-[1200px]",children:[(0,d.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-[#cdd6f4]",children:"Contacts"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-[#a6adc8]",children:"Manage your LinkedIn connections and leads"})]}),(0,d.jsxs)("div",{className:"flex gap-3",children:[(0,d.jsxs)("button",{onClick:()=>{j(!0)},className:"flex items-center gap-2 rounded-lg border border-[#313244] bg-transparent px-4 py-2 text-sm font-medium text-[#cdd6f4] transition-colors duration-200 hover:bg-[#313244] hover:border-[#45475a] focus:outline-none focus:ring-2 focus:ring-[#F25C05] focus:ring-offset-2 focus:ring-offset-[#1e1e2e]",children:[(0,d.jsx)(f,{className:"h-5 w-5"}),"Upload CSV"]}),(0,d.jsxs)("button",{onClick:()=>{b(!0)},className:"flex items-center gap-2 rounded-lg bg-[#F25C05] px-4 py-2 text-sm font-medium text-white transition-colors duration-200 hover:bg-[#ff6b1a] focus:outline-none focus:ring-2 focus:ring-[#F25C05] focus:ring-offset-2 focus:ring-offset-[#1e1e2e]",children:[(0,d.jsx)(g.A,{className:"h-5 w-5"}),"New Contact"]})]})]}),(0,d.jsx)(G,{onSearchChange:a=>{x(a)},onFilterChange:a=>{A(a)},onSortChange:a=>{C(a)},campaigns:o}),t&&(0,d.jsx)("div",{className:"mb-6 rounded-lg border border-red-500/20 bg-red-500/10 p-4",children:(0,d.jsx)("p",{className:"text-sm text-red-400",children:t})}),(0,d.jsx)("div",{className:"hidden md:block",children:(0,d.jsx)(H,{contacts:m,loading:q,onViewContact:J})}),(0,d.jsx)("div",{className:"md:hidden",children:q?(0,d.jsx)("div",{className:"flex h-64 items-center justify-center",children:(0,d.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,d.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-[#313244] border-t-[#F25C05]"}),(0,d.jsx)("p",{className:"text-sm text-[#a6adc8]",children:"Loading contacts..."})]})}):0===m.length?(0,d.jsx)("div",{className:"flex h-64 items-center justify-center rounded-xl border border-[#313244] bg-[#181825] p-6",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("p",{className:"text-base text-[#a6adc8]",children:"No contacts found"}),(0,d.jsx)("p",{className:"mt-1 text-sm text-[#6c7086]",children:"Try adjusting your search or filter criteria"})]})}):(0,d.jsx)("div",{className:"space-y-4",children:m.map(a=>(0,d.jsx)(I,{contact:a,onViewContact:J},a.id))})}),(0,d.jsx)(y,{isOpen:a,onClose:()=>{b(!1)},onSuccess:()=>{D("Contact created successfully!","success"),b(!1),F()}}),k&&(0,d.jsx)(v,{contactId:k,isOpen:c,onClose:()=>{h(!1),l(null)},onContactUpdated:()=>{F()},onContactDeleted:()=>{F()}}),(0,d.jsx)(E,{isOpen:i,onClose:()=>{j(!1)},onSuccess:()=>{D("Contacts imported successfully!","success"),j(!1),F()}})]})}},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},92064:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/toddabraham/Documents/Coding/Projects/NovaCRM/novacrm/app/(dashboard)/contacts/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/toddabraham/Documents/Coding/Projects/NovaCRM/novacrm/app/(dashboard)/contacts/page.tsx","default")},92073:(a,b,c)=>{"use strict";c.d(b,{A:()=>e});var d=c(38301);let e=d.forwardRef(function({title:a,titleId:b,...c},e){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},c),a?d.createElement("title",{id:b},a):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))})}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[796,903,841,106,794,475,629,699],()=>b(b.s=54775));module.exports=c})();