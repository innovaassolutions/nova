(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[670],{63:(e,t,a)=>{"use strict";var s=a(7260);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},1067:(e,t,a)=>{Promise.resolve().then(a.bind(a,7181))},1219:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(2115);let n=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))})},3569:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(2115);let n=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))})},6956:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(2115);let n=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},7181:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(5155),n=a(2115),r=a(8525),l=a(63);let o=n.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}),i=n.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"}))});var c=a(1219),d=a(7218),m=a(6956);let u=n.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});var x=a(3569);function h(e){let{onClose:t,onSuccess:a}=e,[r,l]=(0,n.useState)({full_name:"",email:"",role:"sales_rep",send_email:!0}),[o,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),m=async e=>{e.preventDefault(),i(!0),d(null);try{let e=await fetch("/api/users/invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to invite user");a()}catch(e){d(e instanceof Error?e.message:"Failed to invite user"),i(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-mocha-base border border-mocha-surface0 rounded-lg shadow-xl max-w-md w-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-mocha-surface0",children:[(0,s.jsx)("h2",{className:"text-2xl font-800 text-mocha-text",children:"Invite User"}),(0,s.jsx)("button",{onClick:t,className:"text-mocha-subtext0 hover:text-mocha-text transition-colors",disabled:o,children:(0,s.jsx)(x.A,{className:"w-6 h-6"})})]}),(0,s.jsxs)("form",{onSubmit:m,className:"p-6",children:[c&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:(0,s.jsx)("p",{className:"text-red-500 text-sm",children:c})}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"full_name",className:"block text-sm font-600 text-mocha-text mb-2",children:"Full Name *"}),(0,s.jsx)("input",{type:"text",id:"full_name",name:"full_name",value:r.full_name,onChange:e=>l({...r,full_name:e.target.value}),placeholder:"Enter full name",required:!0,disabled:o,className:"w-full px-4 py-3 bg-mocha-surface0 border border-mocha-surface1 rounded-lg text-mocha-text placeholder-mocha-overlay0 focus:border-innovaas-orange focus:ring-2 focus:ring-innovaas-orange/20 outline-none transition-all disabled:opacity-50"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-600 text-mocha-text mb-2",children:"Email Address *"}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",value:r.email,onChange:e=>l({...r,email:e.target.value}),placeholder:"user@innovaas.com",required:!0,disabled:o,className:"w-full px-4 py-3 bg-mocha-surface0 border border-mocha-surface1 rounded-lg text-mocha-text placeholder-mocha-overlay0 focus:border-innovaas-orange focus:ring-2 focus:ring-innovaas-orange/20 outline-none transition-all disabled:opacity-50"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"role",className:"block text-sm font-600 text-mocha-text mb-2",children:"Role *"}),(0,s.jsxs)("select",{id:"role",name:"role",value:r.role,onChange:e=>l({...r,role:e.target.value}),required:!0,disabled:o,className:"w-full px-4 py-3 bg-mocha-surface0 border border-mocha-surface1 rounded-lg text-mocha-text focus:border-innovaas-orange focus:ring-2 focus:ring-innovaas-orange/20 outline-none transition-all disabled:opacity-50",children:[(0,s.jsx)("option",{value:"sales_rep",children:"Sales Representative"}),(0,s.jsx)("option",{value:"admin",children:"Administrator"}),(0,s.jsx)("option",{value:"executive",children:"Executive (Read-Only)"})]}),(0,s.jsx)("p",{className:"mt-2 text-xs text-mocha-subtext0",children:{sales_rep:"Can create/edit contacts, deals, and activities",admin:"Full access including user management and settings",executive:"Read-only access to dashboard and reports (V2.0)"}[r.role]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:r.send_email,onChange:e=>l({...r,send_email:e.target.checked}),disabled:o,className:"w-4 h-4 text-innovaas-orange bg-mocha-surface0 border-mocha-surface1 rounded focus:ring-2 focus:ring-innovaas-orange/20"}),(0,s.jsx)("span",{className:"text-sm text-mocha-text",children:"Send invitation email with password setup link"})]})}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:t,disabled:o,className:"flex-1 px-4 py-3 bg-mocha-surface0 hover:bg-mocha-surface1 text-mocha-text rounded-lg font-600 transition-colors disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:o,className:"flex-1 px-4 py-3 bg-innovaas-orange hover:bg-innovaas-orange-soft text-white rounded-lg font-600 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"}),"Inviting..."]}):"Invite User"})]})]})]})})}let g=e=>{let{label:t,value:a,icon:n,color:r}=e;return(0,s.jsxs)("div",{className:"flex items-center gap-4 px-6 py-4 bg-mocha-surface0 border border-mocha-surface1 rounded-lg",children:[(0,s.jsx)("div",{className:"p-3 rounded-lg ".concat({blue:"bg-mocha-blue/10 text-mocha-blue",green:"bg-green-500/10 text-green-500",yellow:"bg-yellow-500/10 text-yellow-500",orange:"bg-innovaas-orange/10 text-innovaas-orange"}[r]),children:(0,s.jsx)(n,{className:"w-6 h-6"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-mocha-subtext0",children:t}),(0,s.jsx)("p",{className:"text-2xl font-800 text-mocha-text",children:a})]})]})},b=e=>{let{role:t}=e;return(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-600 border ".concat({admin:"bg-innovaas-orange/10 text-innovaas-orange border-innovaas-orange/20",sales_rep:"bg-mocha-blue/10 text-mocha-blue border-mocha-blue/20",executive:"bg-green-500/10 text-green-500 border-green-500/20"}[t]),children:{admin:"Admin",sales_rep:"Sales Rep",executive:"Executive"}[t]||t})},f=e=>{let{status:t}=e;return"active"===t?(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-600 bg-green-500/10 text-green-500 border border-green-500/20",children:"Active"}):(0,s.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-600 bg-yellow-500/10 text-yellow-500 border border-yellow-500/20",children:"Pending Invitation"})};function p(){let[e,t]=(0,n.useState)([]),[a,l]=(0,n.useState)(!0),[i,c]=(0,n.useState)(!1),[x,p]=(0,n.useState)({total:0,active:0,pending:0}),v=(0,r.U)(),j=async()=>{l(!0);let{data:e,error:a}=await v.from("users").select("*").order("created_at",{ascending:!1});if(a){console.error("Error fetching users:",a),l(!1);return}if(!e||0===e.length){t([]),p({total:0,active:0,pending:0}),l(!1);return}let s=await Promise.all(e.map(async e=>{var t,a;let{data:s}=await v.auth.admin.getUserById(e.id);return{id:e.id,email:e.email,name:e.name,role:e.role,status:(null==s||null==(t=s.user)?void 0:t.email_confirmed_at)?"active":"pending",created_at:e.created_at,last_sign_in_at:(null==s||null==(a=s.user)?void 0:a.last_sign_in_at)||null}}));t(s);let n=s.filter(e=>"active"===e.status).length,r=s.filter(e=>"pending"===e.status).length;p({total:s.length,active:n,pending:r}),l(!1)};return((0,n.useEffect)(()=>{j()},[]),a)?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"text-mocha-subtext0",children:"Loading users..."})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-800 text-mocha-text",children:"Team Members"}),(0,s.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center gap-2 bg-innovaas-orange hover:bg-innovaas-orange-soft text-white px-4 py-2 rounded-lg font-600 transition-colors duration-200",children:[(0,s.jsx)(d.A,{className:"w-5 h-5"}),"Invite User"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,s.jsx)(g,{label:"Total Users",value:x.total,icon:o,color:"blue"}),(0,s.jsx)(g,{label:"Active Users",value:x.active,icon:m.A,color:"green"}),(0,s.jsx)(g,{label:"Pending Invitations",value:x.pending,icon:u,color:"yellow"})]}),0===e.length?(0,s.jsxs)("div",{className:"text-center py-12 bg-mocha-surface0 border border-mocha-surface1 rounded-lg",children:[(0,s.jsx)(o,{className:"w-16 h-16 text-mocha-overlay0 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-mocha-text font-600 mb-2",children:"No team members yet"}),(0,s.jsx)("p",{className:"text-mocha-subtext0 mb-6",children:"Invite your first user to get started!"}),(0,s.jsx)("button",{onClick:()=>c(!0),className:"bg-innovaas-orange hover:bg-innovaas-orange-soft text-white px-6 py-3 rounded-lg font-600 transition-colors duration-200",children:"Invite User"})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-mocha-surface1",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 text-sm font-600 text-mocha-subtext0",children:"Name"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-sm font-600 text-mocha-subtext0",children:"Email"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-sm font-600 text-mocha-subtext0",children:"Role"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-sm font-600 text-mocha-subtext0",children:"Status"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-sm font-600 text-mocha-subtext0",children:"Last Login"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"border-b border-mocha-surface0 hover:bg-mocha-surface0/50 transition-colors",children:[(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsx)("div",{className:"text-mocha-text font-600",children:e.name})}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsx)("div",{className:"text-mocha-subtext0 text-sm",children:e.email})}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsx)(b,{role:e.role})}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsx)(f,{status:e.status})}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsx)("div",{className:"text-mocha-subtext0 text-sm",children:(e=>{if(!e)return"Never";let t=new Date(e),a=Math.floor((new Date().getTime()-t.getTime())/864e5);return 0===a?"Today":1===a?"Yesterday":a<7?"".concat(a," days ago"):a<30?"".concat(Math.floor(a/7)," weeks ago"):a<365?"".concat(Math.floor(a/30)," months ago"):"".concat(Math.floor(a/365)," years ago")})(e.last_sign_in_at)})})]},e.id))})]})}),i&&(0,s.jsx)(h,{onClose:()=>c(!1),onSuccess:()=>{c(!1),j()}})]})}let v=[{id:"users",label:"User Management",icon:o,adminOnly:!0},{id:"campaigns",label:"Campaigns",icon:i,adminOnly:!1},{id:"pipeline-stages",label:"Pipeline Stages",icon:c.A,adminOnly:!0}];function j(){let[e,t]=(0,n.useState)("users"),[a,o]=(0,n.useState)(null),[i,c]=(0,n.useState)(!0),d=(0,l.useRouter)(),m=(0,r.U)();(0,n.useEffect)(()=>{!async function(){var a;let{data:{user:s}}=await m.auth.getUser();if(!s)return d.push("/login");let{data:n}=await m.from("users").select("role").eq("id",s.id).single();o((null==n?void 0:n.role)||"sales_rep"),c(!1),(null==n?void 0:n.role)!=="admin"&&(null==(a=v.find(t=>t.id===e))?void 0:a.adminOnly)&&t("campaigns")}()},[]);let u=v.filter(e=>!e.adminOnly||"admin"===a);return i?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-mocha-subtext0",children:"Loading..."})}):(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-800 text-mocha-text",children:"Settings"}),(0,s.jsx)("p",{className:"text-mocha-subtext0 mt-2",children:"Manage your NovaCRM configuration and team settings"})]}),(0,s.jsx)("div",{className:"border-b border-mocha-surface0 mb-6",children:(0,s.jsx)("div",{className:"flex gap-8",children:u.map(a=>{let n=a.icon,r=e===a.id;return(0,s.jsxs)("button",{onClick:()=>t(a.id),className:"\n                  flex items-center gap-2 px-4 py-3 border-b-2 transition-colors duration-200\n                  ".concat(r?"border-innovaas-orange text-innovaas-orange":"border-transparent text-mocha-subtext0 hover:text-mocha-text","\n                "),children:[(0,s.jsx)(n,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-600",children:a.label})]},a.id)})})}),(0,s.jsxs)("div",{className:"bg-mocha-mantle rounded-lg p-8",children:["users"===e&&(0,s.jsx)(p,{}),"campaigns"===e&&(0,s.jsx)("div",{className:"text-mocha-subtext0",children:"Campaign management coming soon (Story 3.5)"}),"pipeline-stages"===e&&(0,s.jsx)("div",{className:"text-mocha-subtext0",children:"Pipeline stages configuration coming in V2.0"})]})]})}},7218:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(2115);let n=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))})},8525:(e,t,a)=>{"use strict";a.d(t,{U:()=>n});var s=a(8490);function n(){return(0,s.createBrowserClient)("https://uavqmlqkuvjhgnuwcsqx.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVhdnFtbHFrdXZqaGdudXdjc3F4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyMzU1ODAsImV4cCI6MjA4MDgxMTU4MH0.OqghrGyJ6GxZ77QdHfNjLjpi_p_QYSucvl5mu3CJzQw")}}},e=>{e.O(0,[490,441,255,358],()=>e(e.s=1067)),_N_E=e.O()}]);