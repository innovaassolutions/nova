(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[350],{1352:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(5155),n=a(2115),r=a(7218),i=a(9731),l=a(9554),c=a(3569);function d(e){let{isOpen:t,onClose:a,onSuccess:r,campaign:i}=e,l=!!i,[d,o]=(0,n.useState)({name:"",description:"",status:"Active"}),[m,x]=(0,n.useState)({}),[u,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>{i?o({name:i.name,description:i.description||"",status:i.status}):o({name:"",description:"",status:"Active"}),x({})},[i,t]),(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&a()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,a]);let h=async e=>{if(e.preventDefault(),(()=>{let e={};return d.name.trim()?d.name.length>100&&(e.name="Campaign name must be 100 characters or less"):e.name="Campaign name is required",d.description.length>500&&(e.description="Description must be 500 characters or less"),x(e),0===Object.keys(e).length})()){p(!0);try{let e=l?"/api/campaigns/".concat(i.id):"/api/campaigns",t=await fetch(e,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d.name.trim(),description:d.description.trim()||null,status:d.status})}),a=await t.json();if(!t.ok){if(409===t.status)x({name:a.error});else throw Error(a.error||"Failed to save campaign");return}r()}catch(e){console.error("Error saving campaign:",e),alert(e instanceof Error?e.message:"Failed to save campaign")}finally{p(!1)}}};if(!t)return null;let f=500-d.description.length;return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,s.jsxs)("div",{className:"relative w-full max-w-md rounded-2xl border border-[#313244] bg-[#181825] shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-[#313244] px-6 py-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-[#cdd6f4]",children:l?"Edit Campaign":"Create New Campaign"}),(0,s.jsx)("button",{onClick:a,className:"rounded-lg p-1 text-[#a6adc8] transition-colors hover:bg-[#313244] hover:text-[#cdd6f4]",disabled:u,children:(0,s.jsx)(c.A,{className:"h-6 w-6"})})]}),(0,s.jsxs)("form",{onSubmit:h,className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("label",{className:"mb-2 block text-sm font-medium text-[#cdd6f4]",children:["Campaign Name ",(0,s.jsx)("span",{className:"text-[#f38ba8]",children:"*"})]}),(0,s.jsx)("input",{type:"text",value:d.name,onChange:e=>o({...d,name:e.target.value}),className:"w-full rounded-lg border bg-[#1e1e2e] px-4 py-2.5 text-sm text-[#cdd6f4] placeholder-[#6c7086] transition-all duration-200 border-[#313244] focus:border-[#89b4fa] focus:outline-none focus:ring-2 focus:ring-[#89b4fa]/20",placeholder:"e.g., Q4 SaaS Outreach",maxLength:100,disabled:u}),m.name&&(0,s.jsx)("p",{className:"mt-1 text-sm text-[#f38ba8]",children:m.name})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-[#cdd6f4]",children:"Description"}),(0,s.jsxs)("span",{className:"text-xs text-[#6c7086]",children:[f,"/500"]})]}),(0,s.jsx)("textarea",{value:d.description,onChange:e=>o({...d,description:e.target.value}),className:"w-full rounded-lg border bg-[#1e1e2e] px-4 py-2.5 text-sm text-[#cdd6f4] placeholder-[#6c7086] transition-all duration-200 border-[#313244] focus:border-[#89b4fa] focus:outline-none focus:ring-2 focus:ring-[#89b4fa]/20",placeholder:"Optional description of this campaign",rows:3,maxLength:500,disabled:u}),m.description&&(0,s.jsx)("p",{className:"mt-1 text-sm text-[#f38ba8]",children:m.description})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"mb-2 block text-sm font-medium text-[#cdd6f4]",children:"Status"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",name:"status",value:"Active",checked:"Active"===d.status,onChange:e=>o({...d,status:e.target.value}),className:"h-4 w-4 border-[#313244] bg-[#1e1e2e] text-[#f2835a] focus:ring-2 focus:ring-[#f2835a]/20",disabled:u}),(0,s.jsx)("span",{className:"text-sm text-[#cdd6f4]",children:"Active"})]}),(0,s.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",name:"status",value:"Inactive",checked:"Inactive"===d.status,onChange:e=>o({...d,status:e.target.value}),className:"h-4 w-4 border-[#313244] bg-[#1e1e2e] text-[#f2835a] focus:ring-2 focus:ring-[#f2835a]/20",disabled:u}),(0,s.jsx)("span",{className:"text-sm text-[#cdd6f4]",children:"Inactive"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"rounded-lg border border-[#313244] px-4 py-2 text-sm font-medium text-[#cdd6f4] transition-colors hover:bg-[#313244]",disabled:u,children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"rounded-lg bg-[#f2835a] px-4 py-2 text-sm font-medium text-[#1e1e2e] transition-all duration-200 hover:bg-[#f38f6a] disabled:cursor-not-allowed disabled:opacity-50",disabled:u,children:u?"Saving...":l?"Save Changes":"Create Campaign"})]})]})]})})}var o=a(8125);function m(e){let{isOpen:t,onClose:a,onSuccess:r,campaign:i}=e,[l,d]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&!l&&a()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,l,a]);let m=async()=>{d(!0);try{let e=await fetch("/api/campaigns/".concat(i.id),{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to delete campaign")}r()}catch(e){console.error("Error deleting campaign:",e),alert(e instanceof Error?e.message:"Failed to delete campaign"),d(!1)}};return t?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,s.jsxs)("div",{className:"relative w-full max-w-md rounded-2xl border border-[#313244] bg-[#181825] shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-[#313244] px-6 py-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-[#cdd6f4]",children:"Delete Campaign?"}),(0,s.jsx)("button",{onClick:a,className:"rounded-lg p-1 text-[#a6adc8] transition-colors hover:bg-[#313244] hover:text-[#cdd6f4]",disabled:l,children:(0,s.jsx)(c.A,{className:"h-6 w-6"})})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"mb-4 flex justify-center",children:(0,s.jsx)("div",{className:"rounded-full bg-[#f38ba8]/10 p-3",children:(0,s.jsx)(o.A,{className:"h-8 w-8 text-[#f38ba8]"})})}),(0,s.jsxs)("p",{className:"mb-4 text-center text-base text-[#cdd6f4]",children:["Are you sure you want to delete"," ",(0,s.jsx)("span",{className:"font-semibold",children:i.name}),"?"]}),i.contact_count>0&&(0,s.jsxs)("div",{className:"mb-4 rounded-lg bg-[#f38ba8]/10 p-4",children:[(0,s.jsxs)("p",{className:"mb-2 text-sm font-medium text-[#f38ba8]",children:["This campaign has ",i.contact_count," ",1===i.contact_count?"contact":"contacts"," assigned"]}),(0,s.jsx)("p",{className:"text-sm text-[#a6adc8]",children:"Contacts will not be deleted, only the campaign association will be removed."})]}),(0,s.jsx)("p",{className:"mb-6 text-center text-sm text-[#a6adc8]",children:"This action cannot be undone. All campaign associations will be removed."}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"rounded-lg border border-[#313244] px-4 py-2 text-sm font-medium text-[#cdd6f4] transition-colors hover:bg-[#313244]",disabled:l,children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:m,className:"rounded-lg bg-[#f38ba8] px-4 py-2 text-sm font-medium text-[#1e1e2e] transition-all duration-200 hover:bg-[#f5a3b3] disabled:cursor-not-allowed disabled:opacity-50",disabled:l,children:l?"Deleting...":"Delete Campaign"})]})]})]})}):null}function x(){let[e,t]=(0,n.useState)([]),[a,c]=(0,n.useState)(!0),[o,x]=(0,n.useState)(!1),[u,p]=(0,n.useState)(null),[h,f]=(0,n.useState)(null);(0,n.useEffect)(()=>{b()},[]);let b=async()=>{try{c(!0);let e=await fetch("/api/campaigns");if(!e.ok)throw Error("Failed to fetch campaigns");let a=await e.json();t(a.campaigns||[])}catch(e){console.error("Error loading campaigns:",e)}finally{c(!1)}};return(0,s.jsxs)("div",{className:"max-w-[1200px]",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"mb-2 text-3xl font-bold text-[#cdd6f4]",children:"Campaign Management"}),(0,s.jsx)("p",{className:"text-base text-[#a6adc8]",children:"Manage campaigns for organizing leads and contacts"})]}),(0,s.jsxs)("button",{onClick:()=>x(!0),className:"flex items-center gap-2 rounded-lg bg-[#f2835a] px-4 py-2.5 text-sm font-medium text-[#1e1e2e] transition-all duration-200 hover:bg-[#f38f6a] hover:shadow-md hover:shadow-[#f2835a]/20",children:[(0,s.jsx)(r.A,{className:"h-5 w-5"}),"New Campaign"]})]}),(0,s.jsx)("div",{className:"rounded-lg border border-[#313244] bg-[#181825]",children:a?(0,s.jsx)("div",{className:"p-8 text-center",children:(0,s.jsx)("p",{className:"text-[#a6adc8]",children:"Loading campaigns..."})}):0===e.length?(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("p",{className:"mb-2 text-[#cdd6f4]",children:"No campaigns yet"}),(0,s.jsx)("p",{className:"text-sm text-[#a6adc8]",children:"Create your first campaign to start organizing contacts"})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"border-b border-[#313244] bg-[#1e1e2e]",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[#a6adc8]",children:"Campaign Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[#a6adc8]",children:"Description"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[#a6adc8]",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-[#a6adc8]",children:"Contacts"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-[#a6adc8]",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-[#313244]",children:e.map(e=>(0,s.jsxs)("tr",{className:"transition-colors duration-150 hover:bg-[#1e1e2e]",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("p",{className:"text-sm font-medium text-[#cdd6f4]",children:e.name})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("p",{className:"max-w-md truncate text-sm text-[#a6adc8]",children:e.description||"â€”"})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"inline-flex rounded-full px-2.5 py-0.5 text-xs font-medium\n                          ".concat("Active"===e.status?"bg-[#a6e3a1]/10 text-[#a6e3a1]":"bg-[#6c7086]/10 text-[#6c7086]"),children:e.status})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("p",{className:"text-sm text-[#a6adc8]",children:e.contact_count})}),(0,s.jsx)("td",{className:"px-6 py-4 text-right",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>p(e),className:"rounded p-1.5 text-[#89b4fa] transition-colors hover:bg-[#89b4fa]/10",title:"Edit campaign",children:(0,s.jsx)(i.A,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>f(e),className:"rounded p-1.5 text-[#f38ba8] transition-colors hover:bg-[#f38ba8]/10",title:"Delete campaign",children:(0,s.jsx)(l.A,{className:"h-5 w-5"})})]})})]},e.id))})]})})}),o&&(0,s.jsx)(d,{isOpen:o,onClose:()=>x(!1),onSuccess:()=>{x(!1),b()}}),u&&(0,s.jsx)(d,{isOpen:!!u,onClose:()=>p(null),onSuccess:()=>{p(null),b()},campaign:u}),h&&(0,s.jsx)(m,{isOpen:!!h,onClose:()=>f(null),onSuccess:()=>{f(null),b()},campaign:h})]})}},3569:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(2115);let n=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))})},7218:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(2115);let n=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))})},8125:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(2115);let n=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))})},9093:(e,t,a)=>{Promise.resolve().then(a.bind(a,1352))},9554:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(2115);let n=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})},9731:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(2115);let n=s.forwardRef(function(e,t){let{title:a,titleId:n,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))})}},e=>{e.O(0,[441,255,358],()=>e(e.s=9093)),_N_E=e.O()}]);