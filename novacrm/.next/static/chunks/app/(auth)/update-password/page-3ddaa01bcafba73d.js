(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[984],{63:(e,t,s)=>{"use strict";var r=s(7260);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},2372:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(5155),a=s(2115),o=s(63),n=s(5239),d=s(8525),i=s(3212);function l(){let e=(0,o.useRouter)(),t=(0,d.U)(),[s,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[f,p]=(0,a.useState)(!1),[m,b]=(0,a.useState)({});(0,a.useEffect)(()=>{(async()=>{let{data:{session:s}}=await t.auth.getSession();s||((0,i.P)("Invalid or expired reset link","error"),e.push("/login"))})()},[]);let x=async r=>{if(r.preventDefault(),(()=>{let e={};return s?s.length<8&&(e.password="Password must be at least 8 characters"):e.password="Password is required",c?s!==c&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",b(e),0===Object.keys(e).length})()){p(!0);try{let{error:r}=await t.auth.updateUser({password:s});if(r){(0,i.P)(r.message||"Failed to update password","error"),p(!1);return}(0,i.P)("Password updated successfully!","success"),setTimeout(()=>{e.push("/dashboard")},1500)}catch(e){(0,i.P)("Network error. Please try again.","error"),p(!1)}}};return(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-[#1e1e2e]",children:(0,r.jsxs)("div",{className:"w-full max-w-[400px] rounded-2xl border border-[#313244] bg-[#181825] p-8",style:{boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"},children:[(0,r.jsx)("div",{className:"mb-8 flex justify-center",children:(0,r.jsx)(n.default,{src:"/nova-crm-logo.svg",alt:"NovaCRM",width:200,height:60,priority:!0})}),(0,r.jsx)("h1",{className:"mb-6 text-center text-2xl font-bold text-[#cdd6f4]",children:"Set New Password"}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"mb-2 block text-sm font-semibold text-[#a6adc8]",children:"New Password"}),(0,r.jsx)("input",{id:"password",type:"password",value:s,onChange:e=>{l(e.target.value),m.password&&b({...m,password:void 0})},className:"w-full rounded-[10px] border border-[#45475a] bg-[#313244] px-3 py-3 text-base text-[#cdd6f4] transition-all duration-200 placeholder:text-[#6c7086] focus:border-[#F25C05] focus:outline-none focus:ring-[3px] focus:ring-[#F25C05]/10",placeholder:"Enter new password",disabled:f}),m.password&&(0,r.jsx)("p",{className:"mt-1 text-sm text-[#f38ba8]",children:m.password})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"mb-2 block text-sm font-semibold text-[#a6adc8]",children:"Confirm Password"}),(0,r.jsx)("input",{id:"confirmPassword",type:"password",value:c,onChange:e=>{u(e.target.value),m.confirmPassword&&b({...m,confirmPassword:void 0})},className:"w-full rounded-[10px] border border-[#45475a] bg-[#313244] px-3 py-3 text-base text-[#cdd6f4] transition-all duration-200 placeholder:text-[#6c7086] focus:border-[#F25C05] focus:outline-none focus:ring-[3px] focus:ring-[#F25C05]/10",placeholder:"Confirm new password",disabled:f}),m.confirmPassword&&(0,r.jsx)("p",{className:"mt-1 text-sm text-[#f38ba8]",children:m.confirmPassword})]}),(0,r.jsx)("button",{type:"submit",disabled:f,className:"w-full rounded-[10px] bg-[#F25C05] px-4 py-3 text-base font-semibold text-white transition-all duration-200 hover:bg-[#D94C04] hover:-translate-y-0.5 hover:shadow-[0_6px_16px_rgba(242,92,5,0.3)] focus:outline-none focus:ring-[3px] focus:ring-[#F25C05]/10 disabled:cursor-not-allowed disabled:opacity-60 disabled:hover:translate-y-0 disabled:hover:shadow-none",children:f?"Updating...":"Update Password"})]})]})})}},3212:(e,t,s)=>{"use strict";s.d(t,{P:()=>d,ToastContainer:()=>i});var r=s(5155),a=s(2115),o=s(7650);let n=null;function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";n&&n(e,t)}function i(){let[e,t]=(0,a.useState)([]),[s,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{d(!0)},[]);let i=(0,a.useCallback)((e,s)=>{let r="toast-".concat(Date.now(),"-").concat(Math.random());t(t=>[...t,{id:r,message:e,type:s}]),setTimeout(()=>{t(e=>e.filter(e=>e.id!==r))},5e3)},[]);return((0,a.useEffect)(()=>(n=i,()=>{n=null}),[i]),s)?(0,o.createPortal)((0,r.jsx)("div",{className:"pointer-events-none fixed bottom-4 right-4 z-[9999] flex flex-col gap-2",children:e.map(e=>(0,r.jsx)("div",{className:"".concat((e=>{let t="rounded-lg border-2 bg-[#181825] text-[#cdd6f4] shadow-lg";switch(e){case"error":return"".concat(t," border-[#f38ba8]");case"success":return"".concat(t," border-[#a6e3a1]");default:return"".concat(t," border-[#89b4fa]")}})(e.type)," pointer-events-auto animate-fade-in-up px-4 py-3 text-sm font-medium transition-all duration-300 hover:opacity-90"),onClick:()=>{var s;return s=e.id,void t(e=>e.filter(e=>e.id!==s))},role:"alert","aria-live":"assertive",children:e.message},e.id))}),document.body):null}},4652:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return i},getImageProps:function(){return d}});let r=s(8140),a=s(5040),o=s(1356),n=r._(s(1124));function d(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let i=o.Image},5239:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var r=s(4652),a=s.n(r)},6125:(e,t,s)=>{Promise.resolve().then(s.bind(s,2372))},8525:(e,t,s)=>{"use strict";s.d(t,{U:()=>a});var r=s(8490);function a(){return(0,r.createBrowserClient)("https://uavqmlqkuvjhgnuwcsqx.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVhdnFtbHFrdXZqaGdudXdjc3F4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyMzU1ODAsImV4cCI6MjA4MDgxMTU4MH0.OqghrGyJ6GxZ77QdHfNjLjpi_p_QYSucvl5mu3CJzQw")}}},e=>{e.O(0,[490,356,441,255,358],()=>e(e.s=6125)),_N_E=e.O()}]);